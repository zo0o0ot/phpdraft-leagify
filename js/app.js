(function(){angular.module("app",["config","ngRoute","angular-flipclock","datatables","ngLodash","ngSanitize","ngAnimate","ui.bootstrap","ngResource","ngStorage","toastr","toggle-switch","vcRecaptcha","validation.match","ngCapsLock","angularMoment","ordinal","ngMask","slip","mgcrea.ngStrap.helpers.dimensions","mgcrea.ngStrap.helpers.debounce","mgcrea.ngStrap.affix","ngFileUpload","darthwade.loading"])}).call(this),function(){var t=[].slice;this.AngularComponent=function(){function e(){var e,r,o,n,i,s,a,c;for(e=1<=arguments.length?t.call(arguments,0):[],a=this.constructor.$inject,n=o=0,s=a.length;s>o;n=++o)i=a[n],this[i]=e[n];c=this.constructor.prototype;for(i in c)r=c[i],"function"==typeof r&&"constructor"!==i&&"initialize"!==i&&"_"!==i[0]&&(this[i]=("function"==typeof r.bind?r.bind(this):void 0)||this.lodash.bind(r,this))}return e.register=function(t,e){var r,o;return null==t&&(t=this.name||(null!=(o=this.toString().match(/function\s*(.*?)\(/))?o[1]:void 0)),"function"==typeof(r=angular.module("app"))[e]?r[e](t,this):void 0},e.$inject=["lodash"],e.inject=function(){var e;return e=1<=arguments.length?t.call(arguments,0):[],e.push("lodash"),this.$inject=e},e}()}.call(this),function(){var t=function(t,r){function o(){this.constructor=t}for(var n in r)e.call(r,n)&&(t[n]=r[n]);return o.prototype=r.prototype,t.prototype=new o,t.__super__=r.prototype,t},e={}.hasOwnProperty;this.AngularController=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.register=function(t){return r.__super__.constructor.register.call(this,t,"controller")},r}(AngularComponent)}.call(this),function(){var t=function(t,r){function o(){this.constructor=t}for(var n in r)e.call(r,n)&&(t[n]=r[n]);return o.prototype=r.prototype,t.prototype=new o,t.__super__=r.prototype,t},e={}.hasOwnProperty;this.AngularService=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.register=function(t){return r.__super__.constructor.register.call(this,t,"service")},r}(AngularComponent)}.call(this),function(){var t=function(t,r){function o(){this.constructor=t}for(var n in r)e.call(r,n)&&(t[n]=r[n]);return o.prototype=r.prototype,t.prototype=new o,t.__super__=r.prototype,t},e={}.hasOwnProperty,r=[].slice;this.BaseController=function(e){function o(){o.__super__.constructor.apply(this,arguments),"function"==typeof this.initialize&&this.initialize()}return t(o,e),o.$inject=["$routeParams","$scope","$rootScope","$location","$sessionStorage","$window","authenticationService","messageService","donationPromptService","draftService","subscriptionKeys","DTOptionsBuilder"],o.inject=function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],t.push("$routeParams"),t.push("$scope"),t.push("$rootScope"),t.push("$location"),t.push("$sessionStorage"),t.push("$window"),t.push("authenticationService"),t.push("messageService"),t.push("donationPromptService"),t.push("draftService"),t.push("subscriptionKeys"),t.push("DTOptionsBuilder"),t.push("api"),o.__super__.constructor.inject.apply(this,t)},o.prototype.isAuthenticated=function(){return this.authenticationService.isAuthenticated()},o.prototype.isAdmin=function(){return this.isAuthenticated()&&this.authenticationService.isAdmin()},o.prototype.authenticatedName=function(){return this.$sessionStorage.user_name},o.prototype.logOut=function(){return this.authenticationService.logout(),this.messageService.showInfo("Logged Out"),this.$location.path("/home")},o.prototype.hideFooter=function(){return-1!==this.$location.$$path.indexOf("/board")},o.prototype.sendToPreviousPath=function(){var t;return t=this.$sessionStorage.previousRoutes.splice(-2)[0],this.$sessionStorage.previousRoutes.length>1&&!this._pathIsWhitelisted(t)?this.$location.path(t):this.$location.path("/home")},o.prototype.showDraftPasswordModal=function(){return this.draftService.showPasswordModal()},o.prototype.defaultDatatablesOptions=function(){return this.DTOptionsBuilder.withPaginationType("simple").newOptions().withDisplayLength(25).withBootstrap().withBootstrapOptions({ColVis:{classes:{masterButton:"btn btn-primary"}}}).withColVis()},o.prototype._pathIsWhitelisted=function(t){var e;return e=["/login","/verify","/resetPassword","/forgotPassword","/register","/profile"],e.some(function(e){return~t.indexOf(e)})},o}(AngularController)}.call(this),function(){angular.module("app").factory("authTokenHttpRequestInterceptor",["$sessionStorage",function(t){return{request:function(e){return t.authenticated&&(null==e.headers&&(e.headers={}),e.headers["X-Access-Token"]=""+t.auth_token),e}}}]),angular.module("app").config(["$httpProvider",function(t){return t.interceptors.push("authTokenHttpRequestInterceptor")}])}.call(this),function(){angular.module("app").factory("draftPasswordHttpRequestInterceptor",["$sessionStorage",function(t){return{request:function(e){return null!=t.draft_password&&void 0!==t.draft_password&&(null==e.headers&&(e.headers={}),e.headers["X-PhpDraft-DraftPassword"]=""+t.draft_password),e}}}]),angular.module("app").config(["$httpProvider",function(t){return t.interceptors.push("draftPasswordHttpRequestInterceptor")}])}.call(this),function(){var t;t=this,t.def=t.extend}.call(this),function(){angular.module("app").config(["toastrConfig",function(t){return angular.extend(t,{allowHtml:!1,autoDismiss:!1,closeButton:!0,closeHtml:"<button>&times;</button>",containerId:"toast-container",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},maxOpened:5,messageClass:"toast-message",newestOnTop:!0,onHidden:null,onShown:null,positionClass:"toast-top-right",preventDuplicates:!1,preventOpenDuplicates:!1,progressBar:!1,tapToDismiss:!0,target:"body",timeOut:5e3,titleClass:"toast-title",toastClass:"toast"})}])}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.register("subscriptionKeys"),r.prototype.scopeDestroy="$destroy",r.prototype.viewContentLoaded="$viewContentLoaded",r.prototype.routeChangeStart="$routeChangeStart",r.prototype.routeChangeSuccess="$routeChangeSuccess",r.prototype.locationChangeStart="$locationChangeStart",r.prototype.reloadDraft="reloadDraft",r.prototype.loadDraftDependentData="loadDraftDependentData",r.prototype.reloadCommishManagers="reloadCommishManagers",r}(AngularService)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.register("ProPlayerManagementController"),r.inject("$timeout","api","ENV","messageService","workingModalService","Upload"),r.prototype.initialize=function(){var t,e;return this.sports=[],this.progress=100,e=function(t){return function(e){return t.sports=e}}(this),t=function(t){return function(e){return t.messageService.showError("Unable to load sports data, check dev tools and report findings to the open source project (please!)")}}(this),this.api.Admin.getSports({},e,t),this.csvFile={},this.uploadInProgress=!1},r.prototype.submitClicked=function(){return this.form.$valid&&null!=this.sport?(this.uploadInProgress=!0,this.progress=10,this.form.csvFile.upload=this.Upload.upload({url:this.ENV.apiEndpoint+"admin/proplayers",method:"POST",objectKey:"[csvFile]",data:{file:this.form.csvFile.$modelValue,sport:this.sport}}),this.form.csvFile.upload.then(function(t){return function(e){return t.$timeout(function(){return t.form.csvFile.result=e.data,t.uploadInProgress=!1,t.form.csvFile.upload={},t.messageService.showSuccess(t.sport+" player data updated!"),t.progress=100,t.sport=void 0})}}(this),function(t){return function(e){var r;return e.status>0?(r=e.data.errors.join("; "),t.messageService.showError("Unable to upload player data: "+r),t.uploadInProgress=!1,t.progress=0):void 0}}(this),function(t){return function(e){return t.progress=Math.min(100,parseInt(100*e.loaded/e.total))}}(this))):void this.messageService.showWarning("You must select a sport AND a CSV file first!")},r}(BaseController)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.register("RegenerateStatsController"),r.inject("$timeout","api","ENV","messageService","workingModalService","DTOptionsBuilder","DTColumnDefBuilder"),r.prototype.initialize=function(){return this.drafts=[],this.loadAllDrafts()},r.prototype.regenerateStats=function(t){var e,r;return t=parseInt(t,10),0===t?void this.messageService.showWarning("Can't regenerate stats, invalid draft id."):(this.workingModalService.openModal(),this.regenerateInProgress=!0,r=function(t){return function(e){return t.workingModalService.closeModal(),t.regenerateInProgress=!1,t.loadAllDrafts(),t.messageService.showSuccess("Stats regenerated!")}}(this),e=function(t){return function(e){var r;return t.workingModalService.closeModal(),t.regenerateInProgress=!1,r=e.data.error,t.messageService.showError("Unable to regenerate stats: "+error)}}(this),this.api.Admin.regenerateDraftStats({draft_id:t},r,e))},r.prototype.loadAllDrafts=function(){var t,e;return this.workingModalService.openModal(),e=function(t){return function(e){return t.workingModalService.closeModal(),t.drafts=e}}(this),t=function(t){return function(e){return t.workingModalService.closeModal(),t.messageService.showError("Unable to load drafts, check dev tools and report findings to the open source project (please!)")}}(this),this.api.Admin.getAllDrafts({},e,t)},r}(BaseController)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.register("UsersController"),r.inject("$scope","$modal","api","messageService","confirmActionService","workingModalService"),r.prototype.initialize=function(){var t,e;return this.users=[],this.roles=[],e=function(t){return function(e){return t.users=e.users,t.roles=e.roles}}(this),t=function(t){return function(e){return t.messageService.showError("Unable to load users")}}(this),this.users=this.api.User.getAll({},e,t)},r.prototype.editUser=function(t,e){var r;return this.editedUser=t,this.editedUserIndex=e,r=function(t){return function(r){return t.users[e]=r,t.messageService.showSuccess(t.editedUser.name+" updated")}}(this),this.$modal.open({templateUrl:"app/templates/modals/admin_edit_user_modal.html",controller:"AdminEditUserController",controllerAs:"modalCtrl",resolve:{user:function(e){return function(){return t}}(this),userUpdateCallback:function(t){return function(){return r}}(this)}})},r.prototype.deleteUser=function(t,e){var r,o,n,i,s;return s="Delete "+t.name+"?",i="Are you sure you want to delete "+t.name+"? This action cannot be undone.",n="fa-trash",r="Yes, Delete User",o=function(r){return function(){var o,n;return n=function(){return r.workingModalService.closeModal(),r.users.splice(e,1),r.messageService.showSuccess("User deleted")},o=function(){return r.workingModalService.closeModal(),r.messageService.showError("Unable to delete user")},r.workingModalService.openModal(),r.api.User["delete"]({id:t.id},n,o)}}(this),this.confirmActionService.showConfirmationModal(i,o,s,n,r)},r}(BaseController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this.update=e(this.update,this),this.profileFormIsInvalid=e(this.profileFormIsInvalid,this),this.submitClicked=e(this.submitClicked,this),this.passwordInputType=e(this.passwordInputType,this),this.initialize=e(this.initialize,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("EditProfileController"),o.inject("$rootScope","$scope","$sessionStorage","$location","authenticationService","api","workingModalService","messageService","subscriptionKeys"),o.prototype.initialize=function(){return this.$scope.showPassword=!1,this._loadUserProfileData()},o.prototype._loadUserProfileData=function(){var t,e;return e=function(t){return function(e){return t.userProfile=e}}(this),t=function(t){return this.messageService.showError("Unable to load user profile")},this.api.Authentication.getProfile({},e,t)},o.prototype.passwordInputType=function(){return this.$scope.showPassword?"text":"password"},o.prototype.submitClicked=function(){return this.form.$valid?this.update():void 0},o.prototype.profileFormIsInvalid=function(){return this.updateInProgress||!this.form.$valid},o.prototype.update=function(){var t,e,r;return this.workingModalService.openModal(),e={_email:this.userProfile.email,_name:this.userProfile.name,_password:this.userProfile.password,_newPassword:this.userProfile.newPassword,_newConfirmedPassword:this.userProfile.newConfirmedPassword},this.updateInProgress=!0,this.messageService.closeToasts(),r=function(t){return function(e){return t.updateInProgress=!1,t.workingModalService.closeModal(),t.form.$setPristine(),e.invalidateLogin===!0?(t.authenticationService.uncacheSession(),e.sendEmail===!0?(t.messageService.showInfo("Your email was updated. In order to login again you must verify your email address. An email has been sent to that account to activate it. You will be logged out for now. See you soon!"),t.$location.path("/home")):(t.messageService.showInfo("Since you changed your password, we had to log you out and log you back in again. But no biggie - just enter your new password now to login again."),t.$location.path("/login"))):(t.$sessionStorage.user_name!==t.userProfile.name&&t.authenticationService.cacheName(t.userProfile.name),t.messageService.showInfo("User profile information updated!"),t.sendToPreviousPath())}}(this),t=function(t){return function(e){var r,o,n;return t.updateInProgress=!1,t.workingModalService.closeModal(),n=400===e.status&&(null!=(r=e.data.errors)?r.length:void 0)>0?null!=(o=e.data.errors)?o.join("\n"):void 0:"Whoops! We hit a snag - looks like it's on our end ("+e.data.status+")",t.messageService.showError(""+n,"Unable to update your user profile")}}(this),this.api.Authentication.setProfile(e,r,t)},o}(BaseController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this.login=e(this.login,this),this.submitClicked=e(this.submitClicked,this),this.passwordInputType=e(this.passwordInputType,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("LoginController"),o.inject("$q","$scope","api","messageService","workingModalService","authenticationService","$sessionStorage"),o.prototype.initialize=function(){return this.$scope.showPassword=!1,this.authenticationService.isAuthenticated()?(this.messageService.showInfo("Already logged in as "+this.$sessionStorage.user_name+".","Logged In"),this.sendToPreviousPath()):void 0},o.prototype.passwordInputType=function(){return this.$scope.showPassword?"text":"password"},o.prototype.submitClicked=function(){return this.form.$valid?this.login():void 0},o.prototype.login=function(){var t,e,r,o;return this.workingModalService.openModal(),e={_email:this.form.email.$viewValue,_password:this.form.password.$viewValue},r=this.authenticationService.login(e),this.messageService.closeToasts(),this.loginInProgress=!0,o=function(t){return function(e){return t.loginInProgress=!1,t.workingModalService.closeModal(),t.sendToPreviousPath(),t.messageService.showSuccess("Welcome back, "+t.$sessionStorage.user_name+"!","Logged In")}}(this),t=function(t){return function(e){var r,o,n;return t.loginInProgress=!1,t.workingModalService.closeModal(),r=400===e.status?null!=(o=e.data.data)&&null!=(n=o.errors)?n.join("\n"):void 0:"Whoops! We hit a snag - looks like it's on our end ("+e.data.status+")",t.messageService.showError(""+r,"Unable to Login")}}(this),r.promise.then(o,t)},o}(BaseController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this.lostPassword=e(this.lostPassword,this),this.lostFormIsInvalid=e(this.lostFormIsInvalid,this),this.submitClicked=e(this.submitClicked,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("LostPasswordController"),o.inject("$q","ENV","$scope","messageService","workingModalService","authenticationService","$sessionStorage","vcRecaptchaService"),o.prototype.initialize=function(){return this.$scope.showLostForm=!0,this.authenticationService.isAuthenticated()&&(this.messageService.showInfo("Already logged in as "+this.$sessionStorage.user_name+".","Logged In"),this.sendToPreviousPath()),this.$scope.recaptchaPublicKey=this.ENV.recaptchaPublicKey,this.$scope.setRecaptchaResponse=function(t){return function(e){return t.form._recaptcha=e}}(this)},o.prototype.submitClicked=function(){return this.form.$valid?this.lostPassword():void 0},o.prototype.lostFormIsInvalid=function(){var t;return this.lostInProgress||!this.form.$valid||0===(null!=(t=this.form._recaptcha)?t.length:void 0)},o.prototype.lostPassword=function(){var t,e,r,o;return this.workingModalService.openModal(),e={_email:this.form.email.$viewValue,_recaptcha:this.form._recaptcha},this.lostInProgress=!0,r=this.authenticationService.lostPassword(e),this.messageService.closeToasts(),o=function(t){return function(e){return t.lostInProgress=!1,t.workingModalService.closeModal(),t.$scope.userEmail=t.form.email.$viewValue,t.form.$setPristine(),t.$scope.showLostForm=!1,t.messageService.showInfo("Reset password email sent")}}(this),t=function(t){return function(e){var r,o,n,i;return t.lostInProgress=!1,t.workingModalService.closeModal(),r=400===(null!=e&&null!=(o=e.data)?o.status:void 0)?null!=(n=e.data.data)&&null!=(i=n.errors)?i.join("\n"):void 0:"Whoops! We hit a snag - looks like it's on our end ("+e.data.status+")",t.messageService.showError(""+r,"Unable to Request New Password")}}(this),r.promise.then(o,t)},o}(BaseController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this.register=e(this.register,this),this.registerFormIsInvalid=e(this.registerFormIsInvalid,this),this.submitClicked=e(this.submitClicked,this),this.passwordInputType=e(this.passwordInputType,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("RegisterController"),o.inject("$q","ENV","$scope","messageService","workingModalService","authenticationService","$sessionStorage","vcRecaptchaService"),o.prototype.initialize=function(){return this.$scope.showPassword=!1,this.registerInProgress=!1,this.$scope.showRegistrationForm=!0,this.authenticationService.isAuthenticated()&&(this.messageService.showInfo("Already logged in as "+this.$sessionStorage.user_name+".","Logged In"),this.sendToPreviousPath()),this.$scope.recaptchaPublicKey=this.ENV.recaptchaPublicKey,this.$scope.setRecaptchaResponse=function(t){return function(e){return t.form._recaptcha=e}}(this)},o.prototype.passwordInputType=function(){return this.$scope.showPassword?"text":"password"},o.prototype.submitClicked=function(){return this.form.$valid?this.register():void 0},o.prototype.registerFormIsInvalid=function(){var t;return this.registerInProgress||!this.form.$valid||0===(null!=(t=this.form._recaptcha)?t.length:void 0)},o.prototype.register=function(){var t,e,r,o;return this.workingModalService.openModal(),e={_email:this.form.email.$viewValue,_name:this.form.name.$viewValue,_password:this.form.password.$viewValue,_confirmPassword:this.form.confirmedPassword.$viewValue,_recaptcha:this.form._recaptcha},this.registerInProgress=!0,r=this.authenticationService.register(e),this.messageService.closeToasts(),o=function(t){return function(e){return t.registerInProgress=!1,t.workingModalService.closeModal(),t.$scope.newUserName=t.form.name.$viewValue,t.$scope.newUserEmail=t.form.email.$viewValue,t.form.$setPristine(),t.$scope.showRegistrationForm=!1,t.messageService.showInfo("Verification email sent")}}(this),t=function(t){return function(e){var r,o,n,i;return t.registerInProgress=!1,t.workingModalService.closeModal(),i=400===(null!=e&&null!=(r=e.data)?r.status:void 0)?null!=(o=e.data.data)&&null!=(n=o.errors)?n.join("\n"):void 0:"Whoops! We hit a snag - looks like it's on our end ("+e.data.status+")",t.messageService.showError(""+i,"Unable to register")}}(this),r.promise.then(o,t)},o}(BaseController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this.resetPassword=e(this.resetPassword,this),this.resetFormIsInvalid=e(this.resetFormIsInvalid,this),this.submitClicked=e(this.submitClicked,this),this.passwordInputType=e(this.passwordInputType,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("ResetPasswordController"),o.inject("$q","ENV","$scope","$routeParams","messageService","workingModalService","authenticationService","$sessionStorage"),o.prototype.initialize=function(){var t,e,r,o;return this.$scope.showPassword=!1,this.$scope.showResetForm=!1,this.authenticationService.isAuthenticated()&&(this.messageService.showInfo("Already logged in as "+this.$sessionStorage.user_name+".","Logged In"),this.sendToPreviousPath()),this.email=this.$routeParams.email,this.resetToken=this.$routeParams.token,null==this.email||null==this.resetToken?(this.messageService.showError("Invalid token or email"),void(this.$scope.showResetForm=!1)):(r={_email:this.email,_verificationToken:this.resetToken},o=this.authenticationService.verifyResetToken(r),e=function(t){return function(e){return t.$scope.showResetForm=!0}}(this),t=function(t){return function(e){return t.$scope.showResetForm=!1}}(this),void o.promise.then(e,t))},o.prototype.passwordInputType=function(){return this.$scope.showPassword?"text":"password"},o.prototype.submitClicked=function(){return this.form.$valid?this.resetPassword():void 0},o.prototype.resetFormIsInvalid=function(){return this.resetInProgress||!this.form.$valid},o.prototype.resetPassword=function(){var t,e,r,o;return this.workingModalService.openModal(),e={_email:this.email,_password:this.form.password.$viewValue,_verificationToken:this.resetToken,_confirmPassword:this.form.confirmedPassword.$viewValue},this.resetInProgress=!0,r=this.authenticationService.resetPassword(e),this.messageService.closeToasts(),o=function(t){return function(e){return t.resetInProgress=!1,t.workingModalService.closeModal(),t.form.$setPristine(),t.$location.path("/login"),t.messageService.showInfo("Your password has been set - you may log in now")}}(this),t=function(t){return function(e){var r,o,n,i;return t.resetInProgress=!1,t.workingModalService.closeModal(),i=400===(null!=e&&null!=(r=e.data)?r.status:void 0)?null!=(o=e.data.data)&&null!=(n=o.errors)?n.join("\n"):void 0:"Whoops! We hit a snag - looks like it's on our end ("+e.data.status+")",t.messageService.showError(""+i,"Unable to Reset Password")}}(this),r.promise.then(o,t)},o}(BaseController)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.register("VerificationController"),r.inject("$q","$scope","$routeParams","messageService","workingModalService","authenticationService","$sessionStorage"),r.prototype.initialize=function(){var t,e,r,o,n,i;return this.$scope.showErrorInformation=!1,this.authenticationService.isAuthenticated()&&(this.messageService.showInfo("Already logged in as "+this.$sessionStorage.user_name+".","Logged In"),this.sendToPreviousPath()),t=this.$routeParams.email,o=this.$routeParams.token,null==t||null==o?(this.messageService.showError("Invalid verification data"),void(this.$scope.showErrorInformation=!0)):(this.workingModalService.openModal(),r=function(t){return function(e){return setTimeout(function(){return t.workingModalService.closeModal(),t.$scope.showErrorInformation=!1,t.$location.path("/login"),t.messageService.showInfo("Your account has been enabled - you may log in now")},3500)}}(this),e=function(t){return function(e){var r,o,n,i;return t.workingModalService.closeModal(),t.$scope.showErrorInformation=!0,i=400===(null!=e&&null!=(r=e.data)?r.status:void 0)?null!=(o=e.data.data)&&null!=(n=o.errors)?n.join("\n"):void 0:"Whoops! We hit a snag - looks like it's on our end ("+e.data.status+")",t.messageService.showError(""+i,"Unable to verify")}}(this),n={_email:t,_verificationToken:o},i=this.authenticationService.verify(n),this.messageService.closeToasts(),i.promise.then(r,e))},r}(BaseController)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.register("AddPickController"),r.inject("$scope","$rootScope","$routeParams","$q","$location","$loading","subscriptionKeys","workingModalService","api","messageService","authenticationService"),r.prototype.initialize=function(){return this.$scope.currentPick={},this._loadCurrentPick(),this.addInProgress=!1,this.$scope.manualEntry=!1,this.deregister=this.$scope.$on(this.subscriptionKeys.loadDraftDependentData,function(t){return function(e,r){return null==r.draft||r.draft.setting_up!==!0&&r.draft.complete!==!0?void 0:(r.draft.setting_up?t.messageService.showWarning("Unable to add picks for draft: draft has not been started yet."):r.draft.complete&&t.messageService.showWarning("Unable to add picks for draft: draft is already completed"),t.deregister(),t.sendToPreviousPath(),t.draftError=!0)}}(this)),this.$scope.$on(this.subscriptionKeys.scopeDestroy,function(t){return function(e,r){return t.deregister()}}(this))},r.prototype._loadCurrentPick=function(){var t,e;return this.$loading.start("load_current"),this.$scope.currentLoading=!0,t=function(t){return function(e){return t.$loading.finish("load_current"),t.$scope.currentLoading=!1,t.$scope.currentPick=e.pick,t.$scope.pristineCurrentPick=e.pick,t.$scope.teams=e.teams,t.$scope.positions=e.positions,t.$scope.next_5_picks=e.next_5_picks,t.$scope.last_5_picks=e.last_5_picks,t.$scope.is_last_pick=1===e.next_5_picks.length}}(this),e=function(t){return function(e){return t.$loading.finish("load_current"),t.$scope.currentLoading=!1,t.$scope.currentError=!0,t.messageService.showError("Unable to get current pick")}}(this),this.$scope.currentError=!1,this.api.Pick.getCurrent({draft_id:this.$routeParams.draft_id},t,e)},r.prototype._savePick=function(){var t,e;return this.messageService.closeToasts(),this.workingModalService.openModal(),e=function(t){return function(e){return t.addInProgress=!1,t.workingModalService.closeModal(),t.messageService.showSuccess(t.$scope.currentPick.first_name+" "+t.$scope.currentPick.last_name+" drafted"),t.$scope.manualEntry=!1,t.$scope.is_last_pick?(t.deregister(),t.workingModalService.closeModal(),t.workingModalService.openModal(),setTimeout(function(){return t.$location.path("/draft/"+t.$routeParams.draft_id),t.workingModalService.closeModal(),t.messageService.showSuccess("Congrats! Your draft has been completed.","That's a Wrap!")},1500)):t._loadCurrentPick()}}(this),t=function(t){return function(e){var r,o,n;return t.addInProgress=!1,400===(null!=e?e.status:void 0)?r=null!=(o=e.data)&&null!=(n=o.errors)?n.join("\n"):void 0:401===(null!=e?e.status:void 0)?(t.messageService.showError("Unauthorized: please log in."),t.authenticationService.uncacheSession(),t.$location.path("/login")):r="Whoops! We hit a snag - looks like it's on our end ("+e.data.status+")",t.messageService.showError(""+r,"Unable to enter pick")}}(this),this.api.Pick.add(this.$scope.currentPick,e,t)},r}(BaseController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this._create=e(this._create,this),this.createFormIsInvalid=e(this.createFormIsInvalid,this),this.createClicked=e(this.createClicked,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("DraftCreateController"),o.inject("$scope","$rootScope","$routeParams","subscriptionKeys","workingModalService","api","messageService"),o.prototype.initialize=function(){var t,e;return this.draftLoading=!0,this.draftError=!1,e=function(t){return function(e){return t.draft=e,t.draftLoading=!1}}(this),t=function(t){return function(){return t.draftLoading=!1,t.draftError=!0,t.messageService.showError("Unable to load draft defaults")}}(this),this.api.Draft.getCreate({},e,t)},o.prototype.createClicked=function(){return this.createFormIsInvalid()?void 0:this._create()},o.prototype.createFormIsInvalid=function(){return this.registerInProgress||!this.form.$valid},o.prototype._create=function(){var t,e,r;return this.workingModalService.openModal(),e={name:this.form.name.$viewValue,sport:this.sport,style:this.style,rounds:this.form.rounds.$viewValue,password:this.form.password.$viewValue},this.createInProgress=!0,this.messageService.closeToasts(),r=function(t){return function(e){return t.createInProgress=!1,t.workingModalService.closeModal(),t.form.$setPristine(),t.messageService.showSuccess(e.draft.draft_name+" created!"),t.$location.path("/draft/"+e.draft.draft_id)}}(this),t=function(t){return function(e){var r,o,n;return t.createInProgress=!1,t.workingModalService.closeModal(),n=400===(null!=e?e.status:void 0)?null!=(r=e.data)&&null!=(o=r.errors)?o.join("\n"):void 0:"Whoops! We hit a snag - looks like it's on our end ("+e.data.status+")",t.messageService.showError(""+n,"Unable to create draft")}}(this),this.api.Draft.save(e,r,t)},o}(BaseController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this._edit=e(this._edit,this),this.editFormIsInvalid=e(this.editFormIsInvalid,this),this.editClicked=e(this.editClicked,this),this._loadCommishDraft=e(this._loadCommishDraft,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("DraftEditController"),
o.inject("$scope","$rootScope","$routeParams","subscriptionKeys","workingModalService","api","messageService"),o.prototype.initialize=function(){return this.draftLoading=!0,this.draftLoaded=!1,this.draftError=!1,this.deregister=this.$scope.$on(this.subscriptionKeys.loadDraftDependentData,function(t){return function(e,r){if(null!=r.draft&&r.draft.setting_up===!0){if(!t.draftLoaded)return t.deregister(),t._loadCommishDraft(r.draft.draft_id)}else if(null!=r.draft&&(r.draft.in_progress===!0||r.draft.complete===!0))return t.messageService.showWarning("Unable to edit draft: draft has already started or has completed"),t.deregister(),t.sendToPreviousPath(),t.draftError=!0}}(this)),this.$scope.$on(this.subscriptionKeys.scopeDestroy,function(t){return function(e,r){return t.deregister()}}(this))},o.prototype._loadCommishDraft=function(t){var e,r;return this.draftLoaded=!0,r=function(t){return function(e){return t.draftEdit=e,t.draftLoading=!1}}(this),e=function(t){return function(){return t.draftLoading=!1,t.draftError=!0,t.messageService.showError("Unable to load draft")}}(this),this.api.Draft.commishGet({draft_id:t},r,e)},o.prototype.editClicked=function(){return this.editFormIsInvalid()?void 0:this._edit()},o.prototype.editFormIsInvalid=function(){return this.editInProgress||!this.form.$valid},o.prototype._edit=function(){var t,e,r;return this.workingModalService.openModal(),e={draft_id:this.draftEdit.draft_id,name:this.draftEdit.draft_name,sport:this.draftEdit.draft_sport,style:this.draftEdit.draft_style,rounds:this.draftEdit.draft_rounds,password:this.draftEdit.draft_password},this.editInProgress=!0,this.messageService.closeToasts(),r=function(t){return function(e){return t.editInProgress=!1,t.workingModalService.closeModal(),t.form.$setPristine(),t.messageService.showSuccess(e.draft.draft_name+" edited!"),t.$location.path("/draft/"+t.draftEdit.draft_id)}}(this),t=function(t){return function(e){var r,o,n;return t.editInProgress=!1,t.workingModalService.closeModal(),n=400===(null!=e?e.status:void 0)?null!=(r=e.data)&&null!=(o=r.errors)?o.join("\n"):void 0:"Whoops! We hit a snag - looks like it's on our end ("+e.data.status+")",t.messageService.showError(""+n,"Unable to edit draft")}}(this),this.api.Draft.update(e,r,t)},o}(BaseController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this._loadRoundData=e(this._loadRoundData,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("EditPickController"),o.inject("$scope","$rootScope","$routeParams","$q","$location","subscriptionKeys","workingModalService","api","messageService","authenticationService"),o.prototype.initialize=function(){return this.$scope.selectedDraftRound=1,this.$scope.currentPick={},this.$scope.pristineCurrentPick={},this.showPickSelection=!0,this.editInProgress=!1,this.$scope.manualEntry=!0,this.deregister=this.$scope.$on(this.subscriptionKeys.loadDraftDependentData,function(t){return function(e,r){if(null==r.draft||r.draft.setting_up!==!0&&r.draft.complete!==!0){if(null!=r.draft&&r.draft.in_progress===!0&&(t.$scope.pagerItemTally=10*r.draft.draft_rounds,null!=r.onPageLoad&&r.onPageLoad))return t.$scope.selectedDraftRound=r.draft.draft_current_round}else{if(r.draft.setting_up)return t.messageService.showWarning("Unable to edit picks for draft: draft has not been started yet.");if(r.draft.complete)return t.messageService.showWarning("Unable to edit picks for draft: draft is already completed")}}}(this)),this.$scope.$watch(function(t){return function(){return t.$scope.selectedDraftRound}}(this),function(t){return function(){var e;return e={onPageLoad:!0},t._loadRoundData(t.$routeParams.draft_id,e)}}(this)),this.$scope.$on(this.subscriptionKeys.scopeDestroy,function(t){return function(e,r){return t.deregister()}}(this))},o.prototype._loadRoundData=function(t,e){var r,o,n;return n=function(t){return function(e){return t.$scope.roundPicks=e,t.$scope.roundHasPicks=e.length>0,t.$scope.roundPicksLoading=!1}}(this),r=function(t){return function(e){return t.$scope.picksError=!0,t.$scope.roundPicksLoading=!1,t.messageService.showError("Unable to load picks")}}(this),this.$scope.draftValid&&!this.$scope.draftLocked?(this.$scope.picksError=!1,this.$scope.roundPicksLoading=null!=e&&null!=e.onPageLoad&&e.onPageLoad,o=this.api.Pick.getSelectedByRound({draft_id:t,round:this.$scope.selectedDraftRound,sort_ascending:!0},n,r)):void 0},o.prototype.selectEditPick=function(t){return this.$scope.currentPick=t,this.$scope.pristineCurrentPick=t,this.showPickSelection=!1},o.prototype._savePick=function(){var t,e;return this.messageService.closeToasts(),e=function(t){return function(e){return t.editInProgress=!1,t.messageService.showSuccess(t.$scope.currentPick.first_name+" "+t.$scope.currentPick.last_name+" updated"),t.sendToPreviousPath()}}(this),t=function(t){return function(e){var r,o,n;return t.editInProgress=!1,400===(null!=e?e.status:void 0)?r=null!=(o=e.data)&&null!=(n=o.errors)?n.join("\n"):void 0:401===(null!=e?e.status:void 0)?(t.messageService.showError("Unauthorized: please log in."),t.authenticationService.uncacheSession(),t.$location.path("/login")):r="Whoops! We hit a snag - looks like it's on our end ("+e.data.status+")",t.messageService.showError(""+r,"Unable to edit pick")}}(this),this.api.Pick.update(this.$scope.currentPick,e,t)},o}(BaseController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this.timersFormIsInvalid=e(this.timersFormIsInvalid,this),this.submitClicked=e(this.submitClicked,this),this._loadPickTimerData=e(this._loadPickTimerData,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("PickTimersController"),o.inject("$scope","$routeParams","$q","$loading","subscriptionKeys","workingModalService","api","messageService"),o.prototype.initialize=function(){return this.$scope.pickTimerDataLoading=!0,this.deregister=this.$scope.$on(this.subscriptionKeys.loadDraftDependentData,function(t){return function(e,r){if(null==r.draft||r.draft.setting_up!==!0&&r.draft.in_progress!==!0){if(null!=r.draft&&r.draft.complete===!0)return t.$scope.pickTimerDataError=!0,t.sendToPreviousPath(),t.messageService.showWarning("Draft is still setting up"),t.deregister()}else if(parseInt(r.draft.draft_id,10)===parseInt(t.$routeParams.draft_id,10))return t._loadPickTimerData(r.draft.draft_id,r),t.deregister()}}(this)),this.$scope.$on(this.subscriptionKeys.scopeDestroy,function(t){return function(e,r){return t.deregister()}}(this)),this.$scope.$watch(function(t){return function(){return t.$scope.pickTimers}}(this),function(t){return function(){return t._calculateTotalDraftTime()}}(this),!0),this.$scope.$watch(function(t){return function(){return t.$scope.useStaticTime}}(this),function(t){return function(){return t._calculateTotalDraftTime()}}(this))},o.prototype._loadPickTimerData=function(t,e){var r,o,n,i,s;return i=function(t){return function(e){var r,o,n,i;for(i=0,r=0,o=e.length;o>r;r++)n=e[r],n.minutes=Math.floor(n.round_time_seconds/60),n.seconds=n.round_time_seconds-60*n.minutes,i+=n.round_time_seconds;return t.$scope.pickTimers=e,t.$scope.useStaticTime=null!=t.$scope.pickTimers&&"1"===t.$scope.pickTimers[0].is_static_time,t.$scope.roundTimesEnabled=i>0}}(this),n=function(t){return function(e){return t.$scope.numberOfManagers=e.length}}(this),r=function(t){return function(e){return t.$scope.pickTimerDataLoading=!1,t.$scope.pickTimerDataError=!0}}(this),this.$scope.pickTimerDataError=!1,this.$scope.draftValid&&!this.$scope.draftLocked?(this.$loading.start("load_timers"),s=this.api.Draft.getTimers({draft_id:t},i,r),o=this.api.Manager.getManagers({draft_id:t},n,r),this.$q.all([s,o]).then(function(t){return function(){return t.$scope.pickTimerDataLoading=!1,t.$loading.finish("load_timers"),t.$scope.roundTimesEnabled?t._calculateTotalDraftTime():void 0}}(this))):(this.$scope.pickTimerDataLoading=!1,this.$scope.pickTimerDataError=!0)},o.prototype.submitClicked=function(){return this.form.$valid?this.saveTimers():void 0},o.prototype.timersFormIsInvalid=function(){return this.saveInProgress||!this.form.$valid},o.prototype.saveTimers=function(){var t,e,r,o,n,i,s,a,c;if(this.workingModalService.openModal(),c=[],this.$scope.roundTimesEnabled)if(this.$scope.useStaticTime)t=this.$scope.pickTimers[0],t.is_static_time=!0,t.round_time_seconds=60*t.minutes+t.seconds,t.draft_id=this.$routeParams.draft_id,c.push(t);else for(o=this.$scope.pickTimers,e=0,r=o.length;r>e;e++)a=o[e],a.is_static_time=!1,a.round_time_seconds=60*a.minutes+a.seconds,a.draft_id=this.$routeParams.draft_id,c.push(a);return i={draft_id:this.$routeParams.draft_id,isRoundTimesEnabled:this.$scope.roundTimesEnabled,roundTimes:c},this.saveInProgress=!0,this.messageService.closeToasts(),s=function(t){return function(e){return t.saveInProgress=!1,t.workingModalService.closeModal(),t.form.$setPristine(),t.messageService.showInfo("Round timers saved!"),t.sendToPreviousPath()}}(this),n=function(t){return function(e){var r,o,n;return t.saveInProgress=!1,t.workingModalService.closeModal(),n=400===e.status&&(null!=(r=e.data.errors)?r.length:void 0)>0?null!=(o=e.data.errors)?o.join("\n"):void 0:"Whoops! We hit a snag - looks like it's on our end ("+e.data.status+")",t.messageService.showError(""+n,"Unable to save timers")}}(this),this.api.Draft.setTimers(i,s,n)},o.prototype.setSuggestedRoundTimes=function(){var t,e,r,o;if(!this.timersFormIsInvalid()&&0!==this.$scope.numberOfManagers){for(this.$scope.roundTimesEnabled=!0,this.$scope.useStaticTime=!1,r=this.$scope.pickTimers,t=0,e=r.length;e>t;t++)switch(o=r[t],!1){case!(o.draft_round<=1):o.minutes=4,o.seconds=0;break;case!(o.draft_round<=3):o.minutes=3,o.seconds=30;break;case!(o.draft_round<=5):o.minutes=3,o.seconds=15;break;case!(o.draft_round<=7):o.minutes=3,o.seconds=0;break;case!(o.draft_round<=10):o.minutes=2,o.seconds=30;break;case!(o.draft_round<=13):o.minutes=1,o.seconds=45;break;case!(o.draft_round<=15):o.minutes=1,o.seconds=15;break;case!(o.draft_round<=20):o.minutes=1,o.seconds=0;break;case!(o.draft_round<=30):o.minutes=0,o.seconds=45;break;default:o.minutes=0,o.seconds=5}return this._calculateTotalDraftTime()}},o.prototype._calculateTotalDraftTime=function(){var t,e,r,o,n,i,s;if(null==this.$scope.pickTimers||void 0===this.$scope.numberOfManagers)return void(this.$scope.totalDraftingTime=0);for(n=0,this.$scope.useStaticTime&&(o=this.$scope.pickTimers[0],i=60*o.minutes+o.seconds,n=i*this.$scope.pickTimers.length),r=this.$scope.pickTimers,t=0,e=r.length;e>t;t++)o=r[t],s=60*o.minutes+o.seconds,n+=s;return 0===this.$scope.numberOfManagers?this.$scope.totalDraftingTime=0:this.$scope.totalDraftingTime=n*this.$scope.numberOfManagers},o}(BaseController)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.register("AddTradeController"),r.inject("$scope","$rootScope","$routeParams","$q","$location","subscriptionKeys","workingModalService","api","messageService","authenticationService"),r.prototype.initialize=function(){return this.tradeInProgress=!1,this.$scope.firstManagerAssets=[],this.$scope.firstManagerSelectedAssets=[],this.$scope.secondManagerAssets=[],this.$scope.secondManagerSelectedAssets=[],this.loadedManagersOnce=!1,this.deregister=this.$scope.$on(this.subscriptionKeys.loadDraftDependentData,function(t){return function(e,r){return null==r.draft||r.draft.setting_up!==!0&&r.draft.complete!==!0?t.loadedManagersOnce?void 0:t._loadManagers():(r.draft.setting_up?t.messageService.showWarning("Unable to add trade for draft: draft has not been started yet."):r.draft.complete&&t.messageService.showWarning("Unable to add trade for draft: draft is already completed"),t.deregister(),t.sendToPreviousPath(),t.draftError=!0)}}(this)),this.$scope.$on(this.subscriptionKeys.scopeDestroy,function(t){return function(e,r){return t.deregister()}}(this)),this.$scope.$watch(function(t){return function(){return t.$scope.manager1_id}}(this),function(t){return function(){return void 0!==t.$scope.manager1_id?(t._loadManagerAssets(!0,t.$scope.manager1_id),t._disableManagerInOtherDropdown(t.$scope.secondManagers,t.$scope.manager1_id)):void 0}}(this)),this.$scope.$watch(function(t){return function(){return t.$scope.manager2_id}}(this),function(t){return function(){return void 0!==t.$scope.manager2_id?(t._loadManagerAssets(!1,t.$scope.manager2_id),t._disableManagerInOtherDropdown(t.$scope.firstManagers,t.$scope.manager2_id)):void 0}}(this)),this.$scope.$watch(function(t){return function(){return t.$scope.firstManagerAssets}}(this),function(t){return function(){var e,r,o,n,i;for(t.$scope.firstManagerSelectedAssets=[],n=t.$scope.firstManagerAssets,i=[],r=0,o=n.length;o>r;r++)e=n[r],e.chosenAsset?i.push(t.$scope.firstManagerSelectedAssets.push(e)):i.push(void 0);return i}}(this),!0),this.$scope.$watch(function(t){return function(){return t.$scope.secondManagerAssets}}(this),function(t){return function(){var e,r,o,n,i;for(t.$scope.secondManagerSelectedAssets=[],n=t.$scope.secondManagerAssets,i=[],r=0,o=n.length;o>r;r++)e=n[r],e.chosenAsset?i.push(t.$scope.secondManagerSelectedAssets.push(e)):i.push(void 0);return i}}(this),!0)},r.prototype.submitClicked=function(){return this.tradeFormIsInvalid()?void 0:this._saveTrade()},r.prototype.tradeFormIsInvalid=function(){return null==this.$scope.manager1_id||null==this.$scope.manager2_id||0===this.$scope.firstManagerAssets.length||0===this.$scope.secondManagerAssets.length||0===this.$scope.firstManagerSelectedAssets.length||0===this.$scope.secondManagerSelectedAssets.length},r.prototype.toggleAsset=function(t){t.chosenAsset=!t.chosenAsset},r.prototype.twoManagersSelected=function(){return null!=this.$scope.manager1_id&&null!=this.$scope.manager2_id},r.prototype._disableManagerInOtherDropdown=function(t,e){var r,o,n,i;for(i=[],r=0,o=t.length;o>r;r++)n=t[r],i.push(n.disabled=n.manager_id===e);return i},r.prototype._saveTrade=function(){var t,e,r,o,n,i,s,a,c,u;for(this.messageService.closeToasts(),u=function(t){return function(e){return t.tradeInProgress=!1,t.messageService.showSuccess("Trade entered"),t.$location.path("draft/"+t.$routeParams.draft_id+"/trades")}}(this),c=function(t){return function(e){var r,o,n;return t.tradeInProgress=!1,400===(null!=e?e.status:void 0)?n=null!=(r=e.data)&&null!=(o=r.errors)?o.join("\n"):void 0:401===(null!=e?e.status:void 0)?(t.messageService.showError("Unauthorized: please log in."),t.authenticationService.uncacheSession(),t.$location.path("/login")):n="Whoops! We hit a snag - looks like it's on our end ("+e.data.status+")",t.messageService.showError(""+n,"Unable to enter trade")}}(this),i={draft_id:this.$routeParams.draft_id,manager1_id:this.$scope.manager1_id,manager2_id:this.$scope.manager2_id,trade_assets:[]},s=this.$scope.firstManagerAssets,e=0,o=s.length;o>e;e++)t=s[e],t.chosenAsset&&i.trade_assets.push(t.player_id);for(a=this.$scope.secondManagerAssets,r=0,n=a.length;n>r;r++)t=a[r],t.chosenAsset&&i.trade_assets.push(t.player_id);return this.api.Trade.save(i,u,c)},r.prototype._loadManagers=function(){var t,e;return this.loadedManagersOnce=!0,this.$scope.tradeLoading=!0,e=function(t){return function(e){return t.$scope.firstManagers=e,t.$scope.secondManagers=e}}(this),t=function(t){return function(e){return t.$scope.tradeLoading=!1,t.$scope.tradeError=!0,t.messageService.showError("Unable to load managers for trade")}}(this),this.$scope.tradeError=!1,this.api.Manager.getManagers({draft_id:this.$routeParams.draft_id},e,t)},r.prototype._loadManagerAssets=function(t,e){var r,o;return null==t&&(t=!0),r=function(e){return function(r){var o,n,i,s,a;for(n=[],a=r.assets,i=0,s=a.length;s>i;i++)o=a[i],o.chosenAsset=!1,n.push(o);return t?e.$scope.firstManagerAssets=n:e.$scope.secondManagerAssets=n,e.$scope.assetsLoading=!1}}(this),o=function(t){return function(e){return t.$scope.assetsLoading=!1,t.messageService.showError("Unable to load assets for manager")}}(this),this.$scope.assetsLoading=!0,this.api.Trade.getAssets({draft_id:this.$routeParams.draft_id,manager_id:e},r,o)},r}(BaseController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,n=[].slice;t=function(t){function o(){this.beforeSwipe=e(this.beforeSwipe,this),this.reorderManagers=e(this.reorderManagers,this),this._reloadEditableManagers=e(this._reloadEditableManagers,this),o.__super__.constructor.apply(this,arguments),"function"==typeof this.initialize&&this.initialize()}return r(o,t),o.register("CommishManagersController"),o.$inject=["$scope","$rootScope","$q","$routeParams","messageService","subscriptionKeys","draftService","api"],o.inject=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],t.push("$scope"),t.push("$rootScope"),t.push("$q"),t.push("$routeParams"),t.push("messageService"),t.push("subscriptionKeys"),t.push("draftService"),t.push("api"),o.__super__.constructor.inject.apply(this,t)},o.prototype.initialize=function(){return this.editableManagers=[],this.deregister_commish_managers=this.$rootScope.$on(this.subscriptionKeys.updateCommishManagers,function(t){return function(e,r){return t._reloadEditableManagers(r.draft.draft_id,r.draft.commish_editable)}}(this)),this.$scope.$on(this.subscriptionKeys.scopeDestroy,function(t){return function(e,r){return t.deregister_commish_managers()}}(this)),this._reloadEditableManagers()},o.prototype._reloadEditableManagers=function(t,e){var r,o;return r=function(t){return function(e){return t.commishManagersLoading=!1,t.editableManagers=e,t._resetManagerEdits()}}(this),o=function(t){return function(e){return t.managersLoading=!1,t.managersError=!0,t.messageService.showError("Unable to load managers")}}(this),null!=this.$routeParams.draft_id&&e?this.api.Manager.commishGet({draft_id:t},r,o):void 0},o.prototype.reorderManagers=function(t,e,r){var o;return o=this.editableManagers[r],this.editableManagers.splice(r,1),this.editableManagers.splice(e,0,o),this._saveManagerOrder(),!0},o.prototype.openAddManagerModal=function(){return this._resetManagerEdits(),this.draftService.showAddManagersModal(this.$routeParams.draft_id)},o.prototype.deleteManager=function(t){var e,r,o;if(!this.isEditActive)return r=this.editableManagers[t],this.editableManagers.splice(t,1),o=function(t){return function(e){return t.editableManagers=e.managers,t._resetManagerEdits()}}(this),e=function(e){return function(){return e.messageService.showError("Unable to delete manager"),e.editableManagers.splice(t,0,r),e._reorderInMemoryManagers(),e._resetManagerEdits()}}(this),this.api.Manager["delete"]({draft_id:this.$routeParams.draft_id,manager_id:r.manager_id},o,e)},o.prototype._saveManagerOrder=function(t){var e,r,o,n,i,s,a,c,u;for(u=this.$q.defer(),c=function(t){return function(e){return t.commishManagersLoading=!1,t._reorderInMemoryManagers(),u.resolve()}}(this),a=function(t){return function(e){return t.commishManagersLoading=!1,t.messageService.showError("Unable to reorder managers"),u.reject()}}(this),this.commishManagersLoading=!0,i=[],e=1,s=this.editableManagers,r=0,o=s.length;o>r;r++)n=s[r],i.push(n.manager_id);return this.api.Manager.reorder({draft_id:this.$routeParams.draft_id,ordered_manager_ids:i},c,a),u},o.prototype.enableManagerEdit=function(t){var e;if(!this.isEditActive)return e=this.editableManagers[t],e.isBeingEdited=!0,this.isEditActive=!0,this._editedManagerIndex=t,this._editedManagerOriginalName=e.manager_name},o.prototype.cancelManagerEdit=function(t){var e;return e=this.editableManagers[t],e.isBeingEdited=!1,e.managerSaving=!1,this.isEditActive=!1,e.manager_name=this._editedManagerOriginalName,this._editedManagerIndex=null},o.prototype.saveManager=function(t){var e,r,o;return r=this.editableManagers[t],r.managerSaving=!0,o=function(t){return function(e){return t.isEditActive=!1,r.isBeingEdited=!1,r.managerSaving=!1,t.messageService.showSuccess(r.manager_name+" updated!")}}(this),e=function(t){return function(e){return r.managerSaving=!1,t.messageService.showError("Unable to update manager")}}(this),this.api.Manager.update({draft_id:this.$routeParams.draft_id,manager_id:r.manager_id,name:r.manager_name},o,e)},o.prototype._resetManagerEdits=function(){return this.isEditActive=!1,null!=this._editedManagerOriginalName&&this._editedManagerOriginalName.length>0&&null!=this._editedManagerIndex&&null!==this._editedManagerIndex?this.cancelManagerEdit(this._editedManagerIndex):void 0},o.prototype._reorderInMemoryManagers=function(){var t,e,r,o,n;for(t=1,n=this.editableManagers,e=0,r=n.length;r>e;e++)o=n[e],o.draft_order=t,t++},o.prototype.beforeSwipe=function(t){return t.preventDefault()},o}(AngularController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,n=[].slice;t=function(t){function o(){this.formIsInvalid=e(this.formIsInvalid,this),this.buttonClicked=e(this.buttonClicked,this),o.__super__.constructor.apply(this,arguments),"function"==typeof this.initialize&&this.initialize()}return r(o,t),o.register("CommishPickEditController"),o.$inject=["$scope","$routeParams","messageService","pickService","api","limitToFilter"],o.inject=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],t.push("$scope"),t.push("$routeParams"),t.push("messageService"),t.push("pickService"),t.push("api"),t.push("limitToFilter"),o.__super__.constructor.inject.apply(this,t)},o.prototype.initialize=function(){return this.$scope.$watch(function(t){return function(){return t.$scope.currentPick}}(this),function(t){return function(){var e,r,o,n,i;return t.$scope.isFirstPick="1"===(null!=(i=t.$scope.currentPick)?i.player_pick:void 0),t.$scope.manualEntry?(e=null!=t.$scope.currentPick.first_name&&t.$scope.currentPick.first_name.length>0,r=null!=t.$scope.currentPick.last_name&&t.$scope.currentPick.last_name.length>0,n=null!=t.$scope.currentPick.team&&t.$scope.currentPick.team.length>0,o=null!=t.$scope.currentPick.position&&t.$scope.currentPick.position.length>0,t.$scope.currentPick.selected=e||r||n||o):void 0}}(this),!0)},o.prototype.buttonClicked=function(){return this.formIsInvalid()?void 0:this._add()},o.prototype.formIsInvalid=function(){return this.$scope.editInProgress||!this.form.$valid},o.prototype._add=function(){var t,e,r,o;return this.$scope.editInProgress=!0,this.$scope.manualEntry&&!this._pickIsTheSame()?(r=function(t){return function(e){var r;return e.pickIsNotDuplicate===!1?(t.wipePick(),t.$scope.editInProgress=!1,t.messageService.showInfo("Pick was reset - go ahead and enter another player.")):"function"==typeof(r=t.$scope).pickAction?r.pickAction():void 0}}(this),e=function(t){return function(e){return t.$scope.editInProgress=!1,t.messageService.showError("Unable to enter pick - error while checking for duplicates.")}}(this),o=this.pickService.checkForExistingPicks(this.$routeParams.draft_id,this.$scope.currentPick),o.promise.then(r,e)):"function"==typeof(t=this.$scope).pickAction?t.pickAction():void 0},o.prototype.proPlayerSearch=function(t){return this.api.Pick.searchProPlayers({league:this.$scope.draft.draft_sport,searchTerm:t}).$promise.then(function(t){return function(e){return t.limitToFilter(e.players,10)}}(this))["catch"](function(t){return function(){return t.messageService.closeToasts(),t.messageService.showError("Unable to search pro players")}}(this))},o.prototype.selectPlayer=function(t,e,r){var o,n,i;return t.selected=!0,this.$scope.currentPick=angular.merge({},this.$scope.currentPick,t),delete this.$scope.playerSearch,this.$scope.playerSearch="",this._pickIsTheSame()?void 0:(n=function(t){return function(e){return e.pickIsNotDuplicate===!1?(t.wipePick(),t.messageService.showInfo("Pick was reset - go ahead and enter another player.")):void 0}}(this),o=function(t){return function(e){return t.addInProgress=!1,t.messageService.showError("Unable to select pick - error while checking for duplicates."),t.wipePick()}}(this),i=this.pickService.checkForExistingPicks(this.$routeParams.draft_id,this.$scope.currentPick),i.promise.then(n,o))},o.prototype.wipePick=function(){return this.$scope.manualEntry=!1,this.$scope.currentPick=this.$scope.pristinePick},o.prototype._pickIsTheSame=function(){var t,e,r,o;return t=this.$scope.currentPick.first_name===this.$scope.pristinePick.first_name,e=this.$scope.currentPick.last_name===this.$scope.pristinePick.last_name,o=this.$scope.currentPick.team===this.$scope.pristinePick.team,r=this.$scope.currentPick.position===this.$scope.pristinePick.position,t&&e&&o&&r},o}(AngularController)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.register("DonationPromptController"),r.inject("donationPromptService"),r.prototype.initialize=function(){return this.showDonationPrompt=this.donationPromptService.shouldShowPrompt()},r.prototype.hideDonationPrompt=function(){return this.showDonationPrompt=!1,this.donationPromptService.hideDonationPrompt()},r}(BaseController)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.register("BoardController"),r.inject("$scope","$routeParams","$loading","subscriptionKeys","api","messageService"),r.prototype.initialize=function(){return this.initialBoardLoaded=!1,this.$scope.boardLoading=!0,this.$scope.timerEnabled=!1,this.$scope.timerUp=!1,this.$scope.timerRunning=!1,this.calculatedBoardWidth="100%",this.hideFooter(),this.deregister=this.$scope.$on(this.subscriptionKeys.loadDraftDependentData,function(t){return function(e,r){return null!=r.draft&&r.draft.setting_up===!0?(t.$scope.pageError=!0,t.sendToPreviousPath(),t.messageService.showWarning("Draft is still setting up"),t.deregister()):null==r.draft||r.draft.in_progress!==!0&&r.draft.complete!==!0||(null!=r.onPageLoad&&r.onPageLoad&&(t.$scope.currentDraftCounter=r.draft.draft_counter),t.counterChanged=t.$scope.currentDraftCounter!==r.draft.draft_counter,t.initialBoardLoaded?t.counterChanged&&t._loadUpdatedData(r.draft.draft_id):t._loadInitialBoard(r.draft.draft_id),r.draft.complete!==!0)?void 0:t.deregister()}}(this)),this.$scope.$on(this.subscriptionKeys.scopeDestroy,function(t){return function(e,r){return t.deregister()}}(this))},r.prototype._calculateBoardWidth=function(t){var e;return e=175*t+50+4,this.calculatedBoardWidth=e+"px"},r.prototype._loadInitialBoard=function(t){var e,r;return this.initialBoardLoaded=!0,this.$scope.boardLoading=!0,r=function(t){return function(e){var r;return t.$scope.pickRounds=e.allPicks,t.$scope.boardLoading=!1,r=t.$scope.pickRounds[0].length,t._calculateBoardWidth(r)}}(this),e=function(t){return function(e){return t.$scope.boardLoading=!1,t.$scope.boardError=!0,t.messageService.showError("Unable to load draft board")}}(this),this.$scope.draftValid&&!this.$scope.draftLocked?(this.$scope.boardError=!1,this.api.Pick.getAll({draft_id:t},r,e),this._loadCurrentAndNextPicks(t),this._loadTimeRemaining(t)):void 0},r.prototype._loadUpdatedData=function(t){var e,r;return r=function(t){return function(e){var r,o,n,i,s,a;if(r=t.$scope.currentDraftCounter!==e.draft_counter,o=t.$scope.currentPick,t.$scope.currentDraftCounter=e.draft_counter,r&&(t.$scope.currentPick=e.current_pick,t.$scope.previousPick=e.previous_pick,t.$scope.hasPreviousPick=null!=t.$scope.previousPick&&void 0!==t.$scope.previousPick,t._updateBoardPick(e.current_pick),t._updateBoardPick(e.previous_pick),null!=e.updated_picks&&0!==e.updated_picks.length)){for(s=e.updated_picks,n=0,i=s.length;i>n;n++)a=s[n],a.player_pick>=t.$scope.currentPick.player_pick&&t._resetTimer(),t._updateBoardPick(a);return t.$loading.finish("load_current_display"),t.$loading.finish("load_previous_display")}}}(this),e=function(t){return function(e){return t.$loading.finish("load_current_display"),t.$loading.finish("load_previous_display"),t.messageService.showError("Unable to get up to date draft picks"),t.$scope.boardError=!0}}(this),this.$scope.boardError=!1,this.$scope.draftValid&&!this.$scope.draftLocked?(this.$loading.start("load_current_display"),this.$loading.start("load_previous_display"),this.api.Pick.getUpdated({draft_id:t,pick_counter:this.$scope.currentDraftCounter},r,e),this._loadTimeRemaining(t)):void 0},r.prototype._updateBoardPick=function(t){var e,r,o,n,i,s;if(void 0!==this.$scope.pickRounds){for(n=this.$scope.pickRounds[t.player_round-1],i=[],r=e=0,o=n.length;o>e;r=++e)s=n[r],s.player_id===t.player_id?i.push(this.$scope.pickRounds[t.player_round-1][r]=t):i.push(void 0);return i}},r.prototype._loadCurrentAndNextPicks=function(t){var e,r,o;return e=function(t){return function(e){return t.$loading.finish("load_current_display"),t.$scope.currentPick=e[0],t.initialBoardLoaded?t._updateBoardPick(e[0]):void 0}}(this),o=function(t){return function(e){return t.$loading.finish("load_previous_display"),t.$scope.previousPick=e[0],t.$scope.hasPreviousPick=null!=t.$scope.previousPick&&void 0!==t.$scope.previousPick}}(this),r=function(t){return function(e){return t.$loading.finish("load_current_display"),t.$loading.finish("load_previous_display"),t.messageService.showError("Unable to get next and/or current picks"),t.$scope.boardError=!0}}(this),this.$scope.boardError=!1,this.$scope.draftValid&&!this.$scope.draftLocked?(this.$loading.start("load_current_display"),this.$loading.start("load_previous_display"),this.api.Pick.getNext({draft_id:t,amount:1},e,r),this.api.Pick.getLast({draft_id:t,amount:1},o,r)):void 0},r.prototype._resetTimer=function(){return this.timerClockStopHandler(),this._loadTimeRemaining(this.$routeParams.draft_id)},r.prototype.timerClockStopHandler=function(){return this.$scope.timerUp=!0,this.$scope.timerRunning=!1},r.prototype._loadTimeRemaining=function(t){var e,r;return r=function(t){return function(e){var r;return t.$scope.timerLoading=!1,t.$scope.timerEnabled=e.timer_enabled,t.$scope.timerEnabled&&(r=parseInt(e.seconds_remaining,10),t.$scope.timerUp=0===r,r>0)?(t.$scope.timerRunning=!0,t.$scope.setTime(r),t.$scope.start()):void 0}}(this),e=function(t){return function(e){return t.$scope.timerLoading=!1,t.$scope.timerError=!0,t.messageService.showError("Unable to load remaining pick time")}}(this),this.$scope.draftValid&&!this.$scope.draftLocked&&this.$scope.draft.in_progress===!0?(this.$scope.timerError=!1,this.$scope.timerLoading=!0,this.api.Draft.getTimeRemaining({draft_id:t},r,e)):this.deregister()},r}(BaseController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this._loadCompletedData=e(this._loadCompletedData,this),
this._loadInProgressData=e(this._loadInProgressData,this),this._loadSettingUpData=e(this._loadSettingUpData,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("DraftIndexController"),o.inject("$scope","$rootScope","$routeParams","$loading","$timeout","subscriptionKeys","api","messageService"),o.prototype.initialize=function(){return this.$scope.selectedDraftRound=1,this.currentDraftCounter=0,this.deregister=this.$scope.$on(this.subscriptionKeys.loadDraftDependentData,function(t){return function(e,r){if(t.draftCounterChanged=null!=r.onPageLoad&&r.onPageLoad?!0:t.currentDraftCounter!==r.draft.draft_counter,t.currentDraftCounter=null!=r.draft?r.draft.draft_counter:0,null!=r.draft&&r.draft.setting_up===!0)return t._loadSettingUpData(r.draft.draft_id,r);if(null!=r.draft&&r.draft.in_progress===!0){if(t.draftCounterChanged)return t._loadInProgressData(r.draft.draft_id,r)}else if(null!=r.draft&&r.draft.complete===!0)return t.$scope.pagerItemTally=10*t.$rootScope.draft.draft_rounds,t._loadCompletedData(r.draft.draft_id,r)}}(this)),this.$scope.$on(this.subscriptionKeys.scopeDestroy,function(t){return function(e,r){return t.deregister()}}(this)),this.$scope.$watch(function(t){return function(){return t.$scope.selectedDraftRound}}(this),function(t){return function(){return void 0!==t.$scope.draft&&t.$scope.draft.draft_id===t.$routeParams.draft_id&&t.$scope.draft.complete&&t.$scope.draftValid&&!t.$scope.draftLocked?t._loadCompletedData(t.$routeParams.draft_id):void 0}}(this))},o.prototype._loadSettingUpData=function(t,e){var r,o;return o=function(t){return function(e){return t.$scope.managersLoading=!1,t.$scope.managers=e}}(this),r=function(t){return function(e){return t.$scope.managersLoading=!1,t.$scope.managersError=!0,t.messageService.showError("Unable to load managers")}}(this),this.$scope.managersErrorLoading=null!=e.onPageLoad&&e.onPageLoad,this.$scope.commishManagersLoading=null!=e.onPageLoad&&e.onPageLoad,this.$scope.managersError=!1,this.$scope.draftValid&&!this.$scope.draftLocked&&(null!=e.draft.commish_editable&&e.draft.commish_editable===!1&&this.api.Manager.getManagers({draft_id:t},o,r),null!=e.onPageLoad&&e.onPageLoad&&e.draft.commish_editable)?this.$timeout(function(t){return function(){return t.$rootScope.$broadcast(t.subscriptionKeys.updateCommishManagers,{draft:e.draft})}}(this),250):void 0},o.prototype._loadInProgressData=function(t,e){var r,o,n,i,s,a;return n=function(t){return function(e){return t.$loading.finish("load_last_picks"),t.$scope.lastLoading=!1,t.$scope.lastFivePicks=e}}(this),a=function(t){return function(e){return t.$loading.finish("load_next_picks"),t.$scope.nextLoading=!1,t.$scope.nextFivePicks=e}}(this),r=function(t){return function(e){return t.$loading.finish("load_last_picks"),t.$scope.lastLoading=!1,t.$scope.lastError=!0}}(this),i=function(t){return function(e){return t.$loading.finish("load_next_picks"),t.$scope.nextLoading=!1,t.$scope.nextError=!0}}(this),this.$scope.lastLoading=null!=e.onPageLoad&&e.onPageLoad,this.$scope.nextLoading=null!=e.onPageLoad&&e.onPageLoad,null!=e.onPageLoad&&e.onPageLoad||(this.$loading.start("load_last_picks"),this.$loading.start("load_next_picks")),this.$scope.lastError=!1,this.$scope.nextError=!1,this.$scope.draftValid&&!this.$scope.draftLocked?(o=this.api.Pick.getLast({draft_id:t,amount:5},n,r),s=this.api.Pick.getNext({draft_id:t,amount:5},a,i)):void 0},o.prototype._loadCompletedData=function(t){var e,r,o;return o=function(t){return function(e){return t.$scope.roundPicks=e,t.$scope.roundLoading=!1}}(this),e=function(t){return function(e){return t.messageService.showError("Unable to load picks"),t.$scope.roundError=!0,t.$scope.roundLoading=!1}}(this),void 0!==this.$scope.draft&&this.$scope.draftValid&&!this.$scope.draftLocked?(this.$scope.roundError=!1,this.$scope.roundLoading=!0,r=this.api.Pick.getSelectedByRound({draft_id:t,round:this.$scope.selectedDraftRound,sort_ascending:!0},o,e)):void 0},o}(BaseController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this._loadStatsData=e(this._loadStatsData,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("StatsController"),o.inject("$scope","$routeParams","subscriptionKeys","api","messageService"),o.prototype.initialize=function(){return this.deregister=this.$scope.$on(this.subscriptionKeys.loadDraftDependentData,function(t){return function(e,r){return null==r.draft||r.draft.setting_up!==!0&&r.draft.in_progress!==!0?null!=r.draft&&r.draft.complete===!0?t._loadStatsData(r.draft.draft_id,r):void 0:(t.$scope.pageError=!0,t.sendToPreviousPath(),t.messageService.showWarning("Draft is still setting up"),t.deregister())}}(this)),this.$scope.$on(this.subscriptionKeys.scopeDestroy,function(t){return function(e,r){return t.deregister()}}(this))},o.prototype._loadStatsData=function(t,e){var r,o;return o=function(t){return function(e){return t.$scope.statsLoading=!1,t.$scope.stats=e.draft_statistics,t.$scope.stats_generated=null!==e.draft_statistics}}(this),r=function(t){return function(e){return t.$scope.statsLoading=!1,t.$scope.statsError=!0}}(this),this.$scope.statsLoading=null!=e.onPageLoad&&e.onPageLoad,this.$scope.statsError=!1,this.$scope.draftValid&&!this.$scope.draftLocked?this.api.Draft.getStats({draft_id:t},o,r):void 0},o}(BaseController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this._loadTradeData=e(this._loadTradeData,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("TradesController"),o.inject("$scope","$rootScope","$routeParams","subscriptionKeys","api","messageService"),o.prototype.initialize=function(){return this.currentDraftCounter=0,this.deregister=this.$scope.$on(this.subscriptionKeys.loadDraftDependentData,function(t){return function(e,r){return t.draftCounterChanged=null!=r.onPageLoad&&r.onPageLoad?!0:t.currentDraftCounter!==r.draft.draft_counter,t.currentDraftCounter=null!=r.draft?r.draft.draft_counter:0,null!=r.draft&&r.draft.setting_up===!0?(t.$scope.pageError=!0,t.sendToPreviousPath(),t.messageService.showWarning("Draft is still setting up"),t.deregister()):null==r.draft||r.draft.in_progress!==!0&&r.draft.complete!==!0||!t.draftCounterChanged?void 0:t._loadTradeData(r.draft.draft_id,r)}}(this)),this.$scope.$on(this.subscriptionKeys.scopeDestroy,function(t){return function(e,r){return t.deregister()}}(this))},o.prototype._loadTradeData=function(t,e){var r,o,n;return n=function(t){return function(e){return t.$scope.tradesLoading=!1,t.$scope.trades=e}}(this),r=function(t){return function(e){return t.$scope.tradesLoading=!1,t.$scope.tradesError=!0}}(this),this.$scope.tradesLoading=null!=e.onPageLoad&&e.onPageLoad,this.$scope.tradesError=!1,this.$scope.draftValid&&!this.$scope.draftLocked?o=this.api.Trade.query({draft_id:t},n,r):void 0},o}(BaseController)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.register("FooterController"),r.prototype.initialize=function(){return this.date=new Date},r}(BaseController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this.setupDatatable=e(this.setupDatatable,this),this.getCommishDrafts=e(this.getCommishDrafts,this),this._getSingleCommish=e(this._getSingleCommish,this),this.searchCommisioners=e(this.searchCommisioners,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("ByCommishController"),o.inject("$q","$scope","$routeParams","$location","subscriptionKeys","api","messageService","DTOptionsBuilder","DTColumnDefBuilder","limitToFilter"),o.prototype.initialize=function(){return this.drafts=[],this.$scope.draftTableLoading=!1,void 0!==this.$routeParams.commishId?(this.$scope.commishId=this.$routeParams.commishId,this.$scope.commishSelected=!0,this._getSingleCommish(this.$routeParams.commishId),this.getCommishDrafts(this.$scope.commishId)):void 0},o.prototype.searchCommisioners=function(t){return this.api.Commish.search({searchTerm:t}).$promise.then(function(t){return function(e){return t.limitToFilter(e.commissioners,10)}}(this))["catch"](function(t){return function(){return t.messageService.closeToasts(),t.messageService.showError("Unable to search commissioners")}}(this))},o.prototype._getSingleCommish=function(t){return this.api.Commish.get({commish_id:t}).$promise.then(function(t){return function(e){return t.$scope.commishName=e.commissioner.name}}(this))["catch"](function(t){return function(){return t.messageService.showError("Unable to load commissioner")}}(this))},o.prototype.selectCommissioner=function(t,e,r){return this.$scope.commishSelected=!0,this.$scope.commishName=t.name,this.$scope.commishId=t.id,this.$location.search("commishId",t.id),this.$scope.nameSearch="",this.getCommishDrafts(this.$scope.commishId)},o.prototype.getCommishDrafts=function(t){var e,r;return this.drafts=[],this.$scope.draftTableLoading=!0,e=function(t){return function(e){return t.$scope.draftTableLoading=!1,t.drafts=e}}(this),r=function(t){return function(){return t.$scope.draftTableLoading=!1,t.messageService.showError("Unable to load drafts")}}(this),this.api.Draft.getDraftsByCommish({commish_id:t},e,r)},o.prototype.setupDatatable=function(){return this.dtOptions=this.DTOptionsBuilder.withPaginationType("simple").newOptions().withDisplayLength(25).withBootstrap().withBootstrapOptions({ColVis:{classes:{masterButton:"btn btn-primary"}}}).withColVis(),this.dtColumnDefs=[this.DTColumnDefBuilder.newColumnDef(0).withOption("bSearchable",!0),this.DTColumnDefBuilder.newColumnDef(1).withOption("bSearchable",!0),this.DTColumnDefBuilder.newColumnDef(2).withOption("bSearchable",!0),this.DTColumnDefBuilder.newColumnDef(3).withOption("bSearchable",!0)],this.$scope.$on("event:dataTableLoaded",function(t){return function(e,r){return t.datatable=r.DataTable}}(this))},o}(BaseController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this.setupDatatable=e(this.setupDatatable,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("HomeController"),o.inject("$q","$scope","subscriptionKeys","api","messageService","DTOptionsBuilder","DTColumnDefBuilder"),o.prototype.initialize=function(){var t,e,r;return this.drafts=[],this.$scope.draftTableLoading=!0,t=function(t){return function(e){return t.$scope.draftTableLoading=!1,t.drafts=e}}(this),r=function(t){return function(){return t.$scope.draftTableLoading=!1,t.messageService.showError("Unable to load drafts")}}(this),e=this.api.Draft.getDraftList({},t,r)},o.prototype.setupDatatable=function(){return this.dtOptions=this.DTOptionsBuilder.withPaginationType("simple").newOptions().withDisplayLength(25).withBootstrap().withBootstrapOptions({ColVis:{classes:{masterButton:"btn btn-primary"}}}).withColVis().withOption("order",[4,"desc"]),this.dtColumnDefs=[this.DTColumnDefBuilder.newColumnDef(0).withOption("bSearchable",!0),this.DTColumnDefBuilder.newColumnDef(1).withOption("bSearchable",!0),this.DTColumnDefBuilder.newColumnDef(2).withOption("bSearchable",!0),this.DTColumnDefBuilder.newColumnDef(3).withOption("bSearchable",!0),this.DTColumnDefBuilder.newColumnDef(4).withOption("bSearchable",!0).withOption("sType","date"),this.DTColumnDefBuilder.newColumnDef(5).withOption("bSearchable",!0)],this.$scope.$on("event:dataTableLoaded",function(t){return function(e,r){return t.datatable=r.DataTable}}(this))},o}(BaseController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this.addManagers=e(this.addManagers,this),this.removeManager=e(this.removeManager,this),this.addEmptyManager=e(this.addEmptyManager,this),this.initialize=e(this.initialize,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("AddManagersController"),o.inject("$modalInstance","messageService","subscriptionKeys","$rootScope","$scope","draft_id"),o.prototype.initialize=function(){return this.editableManagers=[],this.addEmptyManager()},o.prototype.addEmptyManager=function(){return this.editableManagers.push({manager_name:""})},o.prototype.removeManager=function(t){return this.editableManagers.splice(t,1)},o.prototype.addManagers=function(){var t,e,r,o,n,i,s;for(s=[],i=this.editableManagers,r=0,o=i.length;o>r;r++)n=i[r],n.manager_name.trim().length>0&&s.push(n);return e=function(t){return function(e){return t.messageService.showSuccess("Managers added"),t.$rootScope.$broadcast(t.subscriptionKeys.updateCommishManagers,{draft:t.$rootScope.draft}),t.$modalInstance.dismiss("closed")}}(this),t=function(t){return function(e){return t.messageService.showError("Unable to add managers")}}(this),s.length>0?this.api.Manager.addMultiple({draft_id:this.draft_id,managers:s},e,t):this.cancel()},o.prototype.cancel=function(){return this.$modalInstance.dismiss("closed")},o}(BaseController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this.userFormIsInvalid=e(this.userFormIsInvalid,this),this.initialize=e(this.initialize,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("AdminEditUserController"),o.inject("$modalInstance","messageService","api","user","userUpdateCallback"),o.prototype.initialize=function(){return this.roleDisplays=[{value:"ROLE_COMMISH",label:"Commissioner"},{value:"ROLE_ADMIN",label:"Site Administrator"}],this.user.enabled="1"===this.user.enabled,this.userIsCommish=-1!==this.user.roles.indexOf("ROLE_COMMISH"),this.userIsAdmin=-1!==this.user.roles.indexOf("ROLE_ADMIN")},o.prototype.userFormIsInvalid=function(){return this.actionInProgress||!this.form.$valid},o.prototype.saveUser=function(){var t,e,r,o,n,i;if(!this.userFormIsInvalid())return o=this.userIsCommish&&this.userIsAdmin,t="",e="",r="",this.userIsAdmin&&(t="ROLE_ADMIN"),this.userIsCommish&&(r="ROLE_COMMISH"),o&&(e=","),this.user.roles=""+t+e+r,i=function(t){return function(){return t.userUpdateCallback(t.user),t.$modalInstance.dismiss("closed")}}(this),n=function(t){return function(){return t.messageService.showError("Unable to update user")}}(this),this.api.User.update(this.user,i,n)},o.prototype.cancel=function(){return this.$modalInstance.dismiss("closed")},o}(BaseController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this.cancel=e(this.cancel,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("ConfirmActionModalController"),o.inject("$modalInstance","title","message","iconClass","confirmButtonText"),o.prototype.initialize=function(){return o.__super__.initialize.call(this)},o.prototype.yesClicked=function(){return this.$modalInstance.close(!0)},o.prototype.noClicked=function(){return this.$modalInstance.close(!1)},o.prototype.cancel=function(){return this.$modalInstance.dismiss("closed")},o}(AngularController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this.cancel=e(this.cancel,this),this.gotoLogin=e(this.gotoLogin,this),this.setPassword=e(this.setPassword,this),this.initialize=e(this.initialize,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("DraftPasswordModalController"),o.inject("$modalInstance","$rootScope","$sessionStorage","$routeParams","authenticationService","subscriptionKeys","$location"),o.prototype.initialize=function(){return this.password=this.$sessionStorage.draft_password},o.prototype.isUnauthenticated=function(){return!this.authenticationService.isAuthenticated()},o.prototype.setPassword=function(){return this.$sessionStorage.draft_password=this.form.password.$viewValue,this.$rootScope.$broadcast(this.subscriptionKeys.reloadDraft,{draft_id:this.$routeParams.draft_id,hasResetPassword:!0}),this.cancel()},o.prototype.gotoLogin=function(){return this.$location.path("login"),this.cancel()},o.prototype.cancel=function(){return this.$modalInstance.dismiss("closed")},o}(BaseController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this.cancel=e(this.cancel,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("DuplicatePickModalController"),o.inject("$modalInstance","currentPick","duplicateMatches"),o.prototype.initialize=function(){return o.__super__.initialize.call(this)},o.prototype.yesClicked=function(){return this.$modalInstance.close(!0)},o.prototype.noClicked=function(){return this.$modalInstance.close(!1)},o.prototype.cancel=function(){return this.$modalInstance.dismiss("closed")},o}(AngularController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this.initialize=e(this.initialize,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("WorkingModalController"),o.inject("$modalInstance","$interval","typicalLoadingTimeMs","loadingBarMax","loadingBarIncrement"),o.prototype.initialize=function(){return 0!==this.typicalLoadingTimeMs?this.setupLoadingTimer():void 0},o.prototype.setupLoadingTimer=function(){var t;return this.progressIncrements=Math.round(this.loadingBarIncrement/this.typicalLoadingTimeMs*1e3)/10,t=function(t){return function(){return t.loadingBarMax+=t.progressIncrements,t.loadingBarMax>=100?(t.$interval.cancel(t.intervalPromise),t.intervalPromise=void 0):void 0}}(this),this.intervalPromise=this.$interval(t,this.loadingBarIncrement)},o}(BaseController)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.register("NavController"),r.inject("$rootScope","$scope","$routeParams","$location","messageService","subscriptionKeys","confirmActionService","api","errorService"),r.prototype.initialize=function(){return this.draftNavHidden=!0},r.prototype.changeDraftNav=function(){return this.draftNavHidden=!this.draftNavHidden},r.prototype.showDeleteDraftModal=function(){var t,e,r,o,n;return n="Delete the draft?",o="Are you sure you want to delete the draft? This action cannot be undone.",r="fa-trash",t="Yes, Delete the draft",e=function(t){return function(){var e,r;return r=function(){return t.messageService.showSuccess("Draft deleted"),t.$location.path("/home")},e=function(){return t.messageService.showError("Unable to delete draft")},t.api.Draft["delete"]({draft_id:t.$routeParams.draft_id},r,e)}}(this),this.confirmActionService.showConfirmationModal(o,e,n,r,t)},r.prototype.showStartDraftModal=function(){var t,e,r,o,n;return n="Start draft?",r="Cool, ready to start your draft? Just make sure all managers have been added and your league's details are correct - you can't change them once your draft has been started. Are you ready to get this show on the road?",e="fa-play",t="Yep! Let's do this!",o=function(t){return function(){var e,r;return r=function(){return t.messageService.showSuccess("Draft started"),t.$rootScope.draft.setting_up=!1,t.$rootScope.draft.in_progress=!0,t.$rootScope.$broadcast(t.subscriptionKeys.loadDraftDependentData,{draft:t.$rootScope.draft,onPageLoad:!0})},e=function(e){var r,o;return o="",null!=(null!=(r=e.data)?r.errors:void 0)&&(o=t.errorService.joinErrorsForToastDisplay(e.data.errors)),t.messageService.showError("Unable to start draft    "+o)},t.api.Draft.updateStatus({draft_id:t.$routeParams.draft_id,status:"in_progress"},r,e)}}(this),this.confirmActionService.showConfirmationModal(r,o,n,e,t)},r.prototype.showResetDraftModal=function(){var t,e,r,o,n;return n="Reset draft?",r="Uh oh, something wrong? No problem, we can reset your draft. Fair warning though - any and all picks or trades you've made will be deleted forever. Are you sure?",e="fa-exclamation-triangle",t="Yes, reset my draft",o=function(t){return function(){var e,r;return r=function(){return t.messageService.showSuccess("Draft reset"),t.$rootScope.draft.setting_up=!0,t.$rootScope.draft.in_progress=!1,t.$rootScope.$broadcast(t.subscriptionKeys.loadDraftDependentData,{draft:t.$rootScope.draft,onPageLoad:!0}),t.$location.path("/draft/"+t.$routeParams.draft_id)},e=function(e){var r,o;return o="",null!=(null!=(r=e.data)?r.errors:void 0)&&(o=t.errorService.joinErrorsForToastDisplay(e.data.errors)),t.messageService.showError("Unable to reset draft    "+o)},t.api.Draft.updateStatus({draft_id:t.$routeParams.draft_id,status:"undrafted"},r,e)}}(this),this.confirmActionService.showConfirmationModal(r,o,n,e,t)},r.prototype._isDraftEditable=function(){return null!=this.$scope.draft&&null!=this.$scope.draft.commish_editable?this.$scope.draft.commish_editable:!1},r}(BaseController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this._loadInProgressPicks=e(this._loadInProgressPicks,this),this._loadManagerPicks=e(this._loadManagerPicks,this),this.initialize=e(this.initialize,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("ByManagerController"),o.inject("$scope","$rootScope","$routeParams","$timeout","$loading","subscriptionKeys","messageService","api"),o.prototype.initialize=function(){var t,e;return this.currentDraftCounter=0,e=function(t){return function(e){var r,o;return t.$scope.managerError=!1,t.$scope.managers=e,r=e[0],o=e[e.length-1],t.$scope.selectedManager=r,t._loadManagerPicks(t.$routeParams.draft_id,r.manager_id)}}(this),t=function(t){return function(e){return t.$scope.managerError=!0,t.messageService.showError("Unable to grab managers")}}(this),this.api.Manager.getManagers({draft_id:this.$routeParams.draft_id},e,t),this.deregister=this.$scope.$on(this.subscriptionKeys.loadDraftDependentData,function(t){return function(e,r){if(t.draftCounterChanged=null!=r.onPageLoad&&r.onPageLoad?!0:t.currentDraftCounter!==r.draft.draft_counter,t.currentDraftCounter=null!=r.draft?r.draft.draft_counter:0,null!=r.draft&&r.draft.setting_up===!0)return t.$scope.pageError=!0,t.sendToPreviousPath(),t.messageService.showWarning("Draft is still setting up"),t.deregister();if(null!=r.draft&&r.draft.in_progress===!0){if(void 0!==t.$scope.selectedManager&&t.draftCounterChanged&&t._loadManagerPicks(r.draft.draft_id,t.$scope.selectedManager.manager_id,r),t.draftCounterChanged)return t._loadInProgressPicks(r.draft.draft_id,r)}else if(null!=r.draft&&void 0!==t.$scope.selectedManagerId&&r.draft.complete===!0)return t._loadManagerPicks(r.draft.draft_id,t.$scope.selectedManager.manager_id,r)}}(this)),this.$scope.$on(this.subscriptionKeys.scopeDestroy,function(t){return function(e,r){return t.deregister()}}(this)),this.$scope.$watch(function(t){return function(){return t.$scope.selectedManager}}(this),function(t){return function(){var e;return void 0!==t.$scope.selectedManager?(e={onPageLoad:!0},t._loadManagerPicks(t.$routeParams.draft_id,t.$scope.selectedManager.manager_id,e)):void 0}}(this))},o.prototype._loadManagerPicks=function(t,e,r){var o,n,i;return i=function(t){return function(e){return t.$scope.managerPicks=e,t.$timeout(function(){return t.$scope.picksLoading=!1},1750)}}(this),n=function(t){return function(e){return t.messageService.showError("Unable to load picks"),t.$scope.picksError=!0}}(this),this.$scope.picksLoading=null!=r&&null!=r.onPageLoad&&r.onPageLoad,this.$scope.picksError=!1,o=this.api.Pick.getAllByManager({draft_id:t,manager_id:e,sort_ascending:!0},i,n)},o.prototype._loadInProgressPicks=function(t,e){var r,o,n;return n=function(t){return function(e){return t.$scope.nextFivePicks=e,t.$scope.nextLoading=!1,t.$loading.finish("load_next_picks")}}(this),r=function(t){return function(e){return t.$scope.nextLoading=!1,t.$scope.nextError=!0,t.$loading.finish("load_next_picks")}}(this),this.$scope.nextLoading=null!=e&&null!=e.onPageLoad&&e.onPageLoad,this.$scope.nextError=!1,null!=e.onPageLoad&&e.onPageLoad||this.$loading.start("load_next_picks"),o=this.api.Pick.getNext({draft_id:t,amount:5},n,r)},o}(BaseController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this._loadInProgressData=e(this._loadInProgressData,this),this._loadRoundData=e(this._loadRoundData,this),this.initialize=e(this.initialize,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("ByRoundController"),o.inject("$scope","$rootScope","$routeParams","$timeout","$loading","subscriptionKeys","messageService","api"),o.prototype.initialize=function(){return this.$scope.selectedDraftRound=1,this.currentDraftCounter=0,this.deregister=this.$scope.$on(this.subscriptionKeys.loadDraftDependentData,function(t){return function(e,r){if(t.draftCounterChanged=null!=r.onPageLoad&&r.onPageLoad?!0:t.currentDraftCounter!==r.draft.draft_counter,t.currentDraftCounter=null!=r.draft?r.draft.draft_counter:0,null!=r.draft&&r.draft.setting_up===!0)return t.$scope.pageError=!0,t.sendToPreviousPath(),t.messageService.showWarning("Draft is still setting up"),t.deregister();if(null!=r.draft&&r.draft.in_progress===!0){if(t.$scope.pagerItemTally=10*r.draft.draft_rounds,null!=r.onPageLoad&&r.onPageLoad&&(t.$scope.selectedDraftRound=r.draft.draft_current_round),t.draftCounterChanged)return t._loadRoundData(r.draft.draft_id,r),t._loadInProgressData(r.draft.draft_id,r)}else if(null!=r.draft&&r.draft.complete===!0)return t.$scope.pagerItemTally=10*r.draft.draft_rounds,t._loadRoundData(r.draft.draft_id,r)}}(this)),this.$scope.$on(this.subscriptionKeys.scopeDestroy,function(t){return function(e,r){return t.deregister()}}(this)),this.$scope.$watch(function(t){return function(){return t.$scope.selectedDraftRound}}(this),function(t){return function(){var e;return e={onPageLoad:!0},t._loadRoundData(t.$routeParams.draft_id,e)}}(this))},o.prototype._loadRoundData=function(t,e){var r,o,n;return n=function(t){return function(e){return t.$scope.roundPicks=e,t.$timeout(function(){return t.$scope.roundPicksLoading=!1},1750)}}(this),r=function(t){return function(e){return t.$scope.picksError=!0,t.$scope.roundPicksLoading=!1,t.messageService.showError("Unable to load picks")}}(this),this.$scope.draftValid&&!this.$scope.draftLocked?(this.$scope.picksError=!1,this.$scope.roundPicksLoading=null!=e&&null!=e.onPageLoad&&e.onPageLoad,o=this.api.Pick.getAllByRound({draft_id:t,round:this.$scope.selectedDraftRound,sort_ascending:!0},n,r)):void 0},o.prototype._loadInProgressData=function(t,e){var r,o,n;return n=function(t){return function(e){return t.$scope.nextLoading=!1,t.$scope.nextFivePicks=e,t.$loading.finish("load_next_picks")}}(this),r=function(t){return function(e){return t.$scope.nextLoading=!1,t.$scope.nextError=!0,t.$loading.finish("load_next_picks")}}(this),this.$scope.nextLoading=null!=e&&null!=e.onPageLoad&&e.onPageLoad,this.$scope.nextError=!1,null!=e.onPageLoad&&e.onPageLoad||this.$loading.start("load_next_picks"),o=this.api.Pick.getNext({draft_id:t,amount:5},n,r)},o}(BaseController)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this._loadSearchData=e(this._loadSearchData,this),this.initialize=e(this.initialize,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("SearchController"),o.inject("$scope","$routeParams","$loading","subscriptionKeys","messageService","api"),o.prototype.initialize=function(){return this.$scope.keywords="",this.$scope.team="",this.$scope.position="",this.$scope.sort="DESC",this.currentDraftCounter=0,this.deregister=this.$scope.$on(this.subscriptionKeys.loadDraftDependentData,function(t){return function(e,r){return t.draftCounterChanged=null!=r.onPageLoad&&r.onPageLoad?!0:t.currentDraftCounter!==r.draft.draft_counter,t.currentDraftCounter=null!=r.draft?r.draft.draft_counter:0,null!=r.draft&&r.draft.setting_up===!0?(t.$scope.pageError=!0,t.sendToPreviousPath(),t.messageService.showWarning("Draft is still setting up"),t.deregister()):null==r.draft||r.draft.in_progress!==!0&&r.draft.complete!==!0||!t.draftCounterChanged?void 0:t._loadSearchData(r.draft.draft_id)}}(this)),this.$scope.$on(this.subscriptionKeys.scopeDestroy,function(t){return function(e,r){return t.deregister()}}(this)),this.$scope.$watch(function(t){return function(){return t.$scope.keywords+t.$scope.team+t.$scope.position+t.$scope.sort}}(this),function(t){return function(){var e;return e={onPageLoad:!0},t._loadSearchData(t.$routeParams.draft_id,e)}}(this))},o.prototype.hasSearchItems=function(){var t,e,r;return(null!=(t=this.$scope.keywords)?t.length:void 0)>0||(null!=(e=this.$scope.team)?e.length:void 0)>0||(null!=(r=this.$scope.position)?r.length:void 0)>0},o.prototype.clearSearchCriteria=function(){return this.$scope.keywords="",this.$scope.position="",this.$scope.team=""},o.prototype.toggleSort=function(){return"DESC"===this.$scope.sort?this.$scope.sort="ASC":this.$scope.sort="DESC"},o.prototype._loadSearchData=function(t,e){var r,o;return o=function(t){return function(e){return t.$scope.searchResults=e.player_results,t.$scope.searchLoading=!1,t.$loading.finish("load_search_picks");
}}(this),r=function(t){return function(e){return t.$scope.searchError=!0,t.$scope.searchLoading=!1,t.messageService.showError("Unable to search picks"),t.$loading.finish("load_search_picks")}}(this),this.$scope.draftValid&&!this.$scope.draftLocked&&this.hasSearchItems()?(this.$scope.searchError=!1,this.$scope.searchLoading=null!=e&&null!=e.onPageLoad&&e.onPageLoad,this.$loading.start("load_search_picks"),this.api.Pick.search({draft_id:t,keywords:this.$scope.keywords,team:this.$scope.team,position:this.$scope.position,sort:this.$scope.sort},o,r)):!this.hasSearchItems()&&null!=this.$scope.searchResults&&this.$scope.searchResults.length>0?this.$scope.searchResults=[]:void 0},o}(BaseController)}.call(this),function(){angular.module("app").directive("commishManagers",function(){return{restrict:"E",controller:"CommishManagersController",controllerAs:"commishManagersCtrl",templateUrl:"app/templates/directives/commish/commish_managers.html",scope:{editableManagers:"=",draft:"="}}})}.call(this),function(){angular.module("app").directive("commishPickEdit",function(){return{restrict:"E",controller:"CommishPickEditController",controllerAs:"commishPickEditCtrl",templateUrl:"app/templates/directives/commish/commish_pick_edit.html",scope:{draft:"=",currentPick:"=",pristinePick:"=",positions:"=",teams:"=",manualEntry:"=",editInProgress:"=",pickAction:"&",pickActionText:"@",pickIcon:"@"}}})}.call(this),function(){angular.module("app").directive("donationPrompt",function(){return{restrict:"E",templateUrl:"app/templates/donation_prompt.html",controller:"DonationPromptController",controllerAs:"donationCtrl"}})}.call(this),function(){angular.module("app").directive("draftCompleted",function(){return{restrict:"E",templateUrl:"app/templates/directives/draft/draft_completed.html",scope:{draft:"=",draftValid:"=",roundPicks:"=",selectedDraftRound:"=",pagerItemTally:"="}}})}.call(this),function(){angular.module("app").directive("draftInProgress",function(){return{restrict:"E",templateUrl:"app/templates/directives/draft/draft_in_progress.html",scope:{draft:"=",draftValid:"=",lastFivePicks:"=",nextFivePicks:"=",lastFiveLoading:"=",nextFiveLoading:"="}}})}.call(this),function(){angular.module("app").directive("draftInformation",function(){return{restrict:"E",templateUrl:"app/templates/directives/draft/draft_information.html",scope:{draft:"="}}})}.call(this),function(){angular.module("app").directive("draftSettingUp",function(){return{restrict:"E",templateUrl:"app/templates/directives/draft/draft_setting_up.html",scope:{draft:"=",draftValid:"=",managers:"=",editableManagers:"=",reorderManagers:"=",beforeSwipe:"=",openAddManagers:"=",commishManagersLoading:"=",deleteManager:"=",enableManagerEdit:"=",cancelManagerEdit:"=",saveManager:"=",isEditActive:"="}}})}.call(this),function(){angular.module("app").directive("draftState",function(){return{restrict:"E",transclude:!0,templateUrl:"app/templates/directives/draft/draft_state.html",scope:{ctrl:"=controller",commishName:"=",draftError:"=",draftLoading:"=",draftLocked:"="}}})}.call(this),function(){angular.module("app").directive("draftStatusLabel",function(){return{restrict:"E",templateUrl:"app/templates/directives/draft/draft_status_label.html",scope:{draft:"="}}})}.call(this),function(){angular.module("app").directive("footerBar",function(){return{restrict:"E",templateUrl:"app/templates/footer_bar.html",controller:"FooterController",controllerAs:"footerCtrl"}})}.call(this),function(){angular.module("app").directive("navBar",function(){return{restrict:"E",templateUrl:"app/templates/nav_bar.html",controller:"NavController",controllerAs:"navCtrl"}})}.call(this),function(){angular.module("app").directive("managerPicksDisplay",function(){return{restrict:"E",templateUrl:"app/templates/directives/picks/manager_picks_display.html",scope:{draft:"=",managers:"=",selectedManager:"=",managerPicks:"="}}})}.call(this),function(){angular.module("app").directive("pickDisplay",function(){return{restrict:"E",templateUrl:"app/templates/directives/picks/pick_display.html",scope:{draft:"=",pick:"="}}})}.call(this),function(){angular.module("app").directive("picksByRound",function(){return{restrict:"E",templateUrl:"app/templates/directives/picks/picks_by_round.html",scope:{draft:"=",selectedDraftRound:"=",picks:"=",pagerItemTally:"=",picksLoading:"="}}})}.call(this),function(){angular.module("app").directive("previousPicks",function(){return{restrict:"E",templateUrl:"app/templates/directives/picks/previous_picks.html",scope:{draft:"=",previousPicks:"=",previousLoading:"=",previousError:"="}}})}.call(this),function(){angular.module("app").directive("tradeAssetDisplay",function(){return{restrict:"E",templateUrl:"app/templates/directives/picks/trade_asset_display.html",scope:{draft:"=",asset:"="}}})}.call(this),function(){angular.module("app").directive("upcomingPicks",function(){return{restrict:"E",templateUrl:"app/templates/directives/picks/upcoming_picks.html",scope:{draft:"=",nextPicks:"=",nextLoading:"=",nextError:"="}}})}.call(this),function(){angular.module("app").directive("ngEnter",function(){return function(t,e,r){return e.bind("keydown keypress",function(e){return 13===e.which?(t.$apply(function(){return t.$eval(r.ngEnter)}),e.preventDefault()):void 0})}})}.call(this),function(){angular.module("app").filter("preciseHumanizedSeconds",function(){return function(t){var e,r,o,n,i,s,a;return s="",t>31536e3&&(a=parseInt(t/31536e3,10),a>0&&(t-=31536e3*a,o=a>1?"years":"year",s=s+" "+a+" "+o+", ")),t>604800&&(i=parseInt(t/604800,10),i>0&&(t-=604800*i,o=i>1?"weeks":"week",s=s+" "+i+" "+o+", ")),t>86400&&(e=parseInt(t/86400,10),e>0&&(t-=86400*e,o=e>1?"days":"day",s=s+" "+e+" "+o+", ")),t>3600&&(r=parseInt(t/3600,10),r>0&&(t-=3600*r,o=r>1?"hours":"hour",s=s+" "+r+" "+o+", ")),t>60&&(n=parseInt(t/60,10),n>0&&(t-=60*n,o=n>1?"minutes":"minute",s=s+" "+n+" "+o+", ")),o=t>1?"seconds":"second",s=""+s+t+" "+o}})}.call(this),function(){angular.module("app").directive("sectionError",function(){return{restrict:"E",templateUrl:"app/templates/directives/shared/section_error.html",scope:{showError:"=",sectionName:"@sectionName"}}})}.call(this),function(){angular.module("app").directive("sectionLoading",function(){return{restrict:"E",templateUrl:"app/templates/directives/shared/section_loading.html",scope:{showLoading:"="}}})}.call(this),function(){angular.module("app").directive("showErrors",function(){return{restrict:"A",require:"^form",link:function(t,e,r,o){var n,i,s;n=e[0].querySelector("[name]"),s=angular.element(n),i=s.attr("name"),s.bind("blur",function(){e.toggleClass("has-error",o[i].$invalid)})}}})}.call(this),function(){angular.module("app").run(["$rootScope","$interval","api","subscriptionKeys","draftService","messageService",function(t,e,r,o,n,i){return t.loadDraftData=!0,t.draftLoadInProgress=!1,t.draftErrors=0,t.$on(o.reloadDraft,function(s,a){var c,u,d;return c=function(r){return function(){return e.cancel(t.draftIntervalPromise),t.draftIntervalPromise=void 0}}(this),d=function(r){return function(r){return t.draftErrors=0,t.draft=r,t.draftLoadInProgress=!1,t.loadDraftData&&(t.loadDraftData=null!=r.teams&&null!=r.positions?!0:!1),null!=r.teams&&null!=r.positions&&t.loadDraftData?(t.loadDraftData=!1,t.cachedDraftId=r.draft_id,t.sports=r.sports,t.styles=r.styles,t.statuses=r.statuses,t.teams=r.teams,t.positions=r.positions):(t.draft.sports=t.sports,t.draft.styles=t.styles,t.draft.statuses=t.statuses,t.draft.teams=t.teams,t.draft.positions=t.positions),t.showDraftMenu=!0,t.draftLoading=!1,null!=a.hasResetPassword&&a.hasResetPassword&&void 0===t.draftIntervalPromise&&(t.draftIntervalPromise=e(t.draftIntervalHandler,2750)),r.is_locked&&(t.draftLocked=!0,t.draftValid=!1,n.showPasswordModal(),c()),t.draftError=!1,t.draftValid=!0,t.$broadcast(o.loadDraftDependentData,{draft:r,onPageLoad:a.onPageLoad}),null!=r.complete&&r.complete===!0&&void 0!==t.draftIntervalPromise?c():void 0}}(this),u=function(e){return function(){return t.draftErrors++,t.draftLoadInProgress=!1,t.showDraftMenu=!1,t.draftLoading=!1,2===t.draftErrors?(c(),t.draftError=!0,t.draftValid=!1,i.closeToasts(),i.showError("Unable to load draft")):(i.closeToasts(),i.showWarning("We seem to be having trouble loading this draft, possibly due to network connectivity issues"))}}(this),null==a.draft_id?(t.draftLoading=!1,t.draftError=!0,t.draftValid=!1,t.showDraftMenu=!1,void i.showError("Unable to load draft")):t.draftLoading||t.draftLoadInProgress?void 0:(t.draftLoadInProgress=!0,t.draftLoading=null!=a.onPageLoad&&a.onPageLoad,t.draftError=!1,t.draftLocked=!1,t.loadDraftData=a.draft_id!==t.cachedDraftId,r.Draft.get({id:a.draft_id,get_draft_data:t.loadDraftData},d,u))})}])}.call(this),function(){angular.module("app").run(["$rootScope","$location","authenticationService","messageService",function(t,e,r,o){return t.$on("$routeChangeStart",function(t,n,i){return null==n&&e.path("/error"),!n.$$route.adminOnly||r.isAuthenticated()&&r.isAdmin()?void 0:(e.path("/"),o.showError("Insufficient user privileges to access that page, sorry friend."))})}])}.call(this),function(){angular.module("app").run(["$rootScope","$sessionStorage","$routeParams","$location","authenticationService","messageService","subscriptionKeys",function(t,e,r,o,n,i,s){return t.$on(s.routeChangeSuccess,function(t,r,s){return n.isAuthenticationExpired()&&(i.showInfo("Your login has expired. You must log back in if you wish to continue."),null!=o.$$path&&"/login"!==o.$$path&&o.path("/login")),null!=o.$$path&&(void 0===e.previousRoutes&&(e.previousRoutes=[]),e.previousRoutes[e.previousRoutes.length-1]!==o.$$path)?e.previousRoutes.push(o.$$path):void 0})}])}.call(this),function(){angular.module("app").run(["$rootScope","$sessionStorage","$routeParams","$interval","subscriptionKeys",function(t,e,r,o,n){return t.$on(n.viewContentLoaded,function(e,i,s){return t.draftIntervalHandler=function(){return t.$broadcast(n.reloadDraft,{draft_id:r.draft_id,onPageLoad:!1})},null==r.draft_id?(o.cancel(t.draftIntervalPromise),t.draftIntervalPromise=void 0,t.showDraftMenu=!1,t.loadDraftData=!1):(t.loadDraftData=!0,t.$broadcast(n.reloadDraft,{draft_id:r.draft_id,onPageLoad:!0}),void 0===t.draftIntervalPromise?t.draftIntervalPromise=o(t.draftIntervalHandler,3e3):void 0)})}])}.call(this),function(){angular.module("app").config(["$routeProvider","$locationProvider",function(t,e){return e.html5Mode(!0).hashPrefix("!"),t.when("/",{controller:"HomeController",controllerAs:"homeCtrl",templateUrl:"app/templates/home/home.html"}),t.when("/home",{controller:"HomeController",controllerAs:"homeCtrl",templateUrl:"app/templates/home/home.html"}),t.when("/by-commish",{controller:"ByCommishController",controllerAs:"byCommishCtrl",templateUrl:"app/templates/home/by_commish.html",reloadOnSearch:!1}),t.when("/login",{controller:"LoginController",controllerAs:"loginCtrl",templateUrl:"app/templates/authentication/login.html"}),t.when("/register",{controller:"RegisterController",controllerAs:"registerCtrl",templateUrl:"app/templates/authentication/register.html"}),t.when("/verify/:email?/:token?",{controller:"VerificationController",controllerAs:"verificationCtrl",templateUrl:"app/templates/authentication/verify.html"}),t.when("/lostPassword",{controller:"LostPasswordController",controllerAs:"lostPasswordCtrl",templateUrl:"app/templates/authentication/lost.html"}),t.when("/resetPassword/:email?/:token?",{controller:"ResetPasswordController",controllerAs:"resetCtrl",templateUrl:"app/templates/authentication/reset.html"}),t.when("/profile",{controller:"EditProfileController",controllerAs:"editProfileCtrl",templateUrl:"app/templates/authentication/edit_profile.html"}),t.when("/draft/:draft_id",{controller:"DraftIndexController",controllerAs:"draftCtrl",templateUrl:"app/templates/draft/index.html"}),t.when("/draft/:draft_id/board",{controller:"BoardController",controllerAs:"boardCtrl",templateUrl:"app/templates/draft/board.html"}),t.when("/draft/:draft_id/picks/manager",{controller:"ByManagerController",controllerAs:"managerCtrl",templateUrl:"app/templates/picks/by_manager.html"}),t.when("/draft/:draft_id/picks/round",{controller:"ByRoundController",controllerAs:"roundCtrl",templateUrl:"app/templates/picks/by_round.html"}),t.when("/draft/:draft_id/trades",{controller:"TradesController",controllerAs:"tradesCtrl",templateUrl:"app/templates/draft/trades.html"}),t.when("/draft/:draft_id/search",{controller:"SearchController",controllerAs:"searchCtrl",templateUrl:"app/templates/picks/search.html"}),t.when("/draft/:draft_id/stats",{controller:"StatsController",controllerAs:"statsCtrl",templateUrl:"app/templates/draft/stats.html"}),t.when("/commish/draft/create",{controller:"DraftCreateController",controllerAs:"draftCreateCtrl",templateUrl:"app/templates/commish/draft_create.html"}),t.when("/commish/draft/:draft_id/edit",{controller:"DraftEditController",controllerAs:"draftEditCtrl",templateUrl:"app/templates/commish/draft_edit.html"}),t.when("/commish/draft/:draft_id/timers",{controller:"PickTimersController",controllerAs:"pickTimerCtrl",templateUrl:"app/templates/commish/pick_timers.html"}),t.when("/commish/draft/:draft_id/picks/add",{controller:"AddPickController",controllerAs:"addPickCtrl",templateUrl:"app/templates/commish/add_pick.html"}),t.when("/commish/draft/:draft_id/picks/edit",{controller:"EditPickController",controllerAs:"editPickCtrl",templateUrl:"app/templates/commish/edit_pick.html"}),t.when("/commish/draft/:draft_id/trades/add",{controller:"AddTradeController",controllerAs:"addTradeCtrl",templateUrl:"app/templates/commish/add_trade.html"}),t.when("/admin/users",{controller:"UsersController",controllerAs:"usersCtrl",templateUrl:"app/templates/admin/users.html",adminOnly:!0}),t.when("/admin/proplayers",{controller:"ProPlayerManagementController",controllerAs:"proPlayerCtrl",templateUrl:"app/templates/admin/pro_player_management.html",adminOnly:!0}),t.when("/admin/stats",{controller:"RegenerateStatsController",controllerAs:"regenerateCtrl",templateUrl:"app/templates/admin/regenerate_stats.html",adminOnly:!0})}])}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this.isAuthenticationExpired=e(this.isAuthenticationExpired,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("authenticationService"),o.inject("api","$q","$sessionStorage"),o.prototype.cacheSession=function(t){return this.$sessionStorage.authenticated=!0,this.$sessionStorage.auth_token=t.token,this.$sessionStorage.user_name=t.name,this.$sessionStorage.auth_time=t.auth_timeout,this.$sessionStorage.user_admin=t.is_admin},o.prototype.cacheName=function(t){return delete this.$sessionStorage.user_name,this.$sessionStorage.user_name=t},o.prototype.uncacheSession=function(){return this.$sessionStorage.authenticated=!1,delete this.$sessionStorage.auth_token,delete this.$sessionStorage.user_name,delete this.$sessionStorage.auth_time},o.prototype.cacheRoles=function(t){return this.$sessionStorage.roles=t},o.prototype.isAuthenticated=function(){return this.$sessionStorage.authenticated&&null!=this.$sessionStorage.user_name&&null!=this.$sessionStorage.auth_token},o.prototype.isAdmin=function(){return this.$sessionStorage.user_admin},o.prototype.login=function(t){var e,r,o;return r=this.$q.defer(),this.uncacheSession(),o=function(t){return function(e){return t.cacheSession(e),r.resolve({data:e,status:e.status})}}(this),e=function(t){return function(t){return r.reject({data:t,status:t.status})}}(this),this.api.Authentication.login(t,o,e),r},o.prototype.logout=function(){return this.uncacheSession()},o.prototype.isAuthenticationExpired=function(){var t,e;return this.isAuthenticated()?(t=new Date(this.$sessionStorage.auth_time),e=new Date,e>t?(this.uncacheSession(),!0):!1):!1},o.prototype.register=function(t){var e,r,o;return r=this.$q.defer(),o=function(t){return function(t){return r.resolve({data:t,status:t.status})}}(this),e=function(t){return function(t){return r.reject({data:t,status:t.status})}}(this),this.api.Authentication.register(t,o,e),r},o.prototype.verify=function(t){var e,r,o;return r=this.$q.defer(),o=function(t){return function(t){return r.resolve({data:t,status:t.status})}}(this),e=function(t){return function(t){return r.reject({data:t,status:t.status})}}(this),this.api.Authentication.verify(t,o,e),r},o.prototype.lostPassword=function(t){var e,r,o;return r=this.$q.defer(),o=function(t){return function(t){return r.resolve({data:t,status:t.status})}}(this),e=function(t){return function(t){return r.reject({data:t,status:t.status})}}(this),this.api.Authentication.lostPassword(t,o,e),r},o.prototype.verifyResetToken=function(t){var e,r,o;return r=this.$q.defer(),o=function(t){return function(t){return r.resolve({data:t,status:t.status})}}(this),e=function(t){return function(t){return r.reject({data:t,status:t.status})}}(this),this.api.Authentication.verifyResetToken(t,o,e),r},o.prototype.resetPassword=function(t){var e,r,o;return r=this.$q.defer(),o=function(t){return function(t){return r.resolve({data:t,status:t.status})}}(this),e=function(t){return function(t){return r.reject({data:t,status:t.status})}}(this),this.api.Authentication.resetPassword(t,o,e),r},o}(AngularService)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.register("confirmActionService"),r.inject("$modal"),r.prototype.showConfirmationModal=function(t,e,r,o,n){return this.modalInstance=this.$modal.open({templateUrl:"app/templates/modals/confirm_action_modal.html",controller:"ConfirmActionModalController",controllerAs:"modalCtrl",resolve:{title:function(t){return function(){return null!=r&&r.length>0?r:"Are you sure?"}}(this),message:function(e){return function(){return t}}(this),iconClass:function(t){return function(){return null!=o&&o.length>0?o:"fa-question"}}(this),confirmButtonText:function(t){return function(){return null!=n&&n.length>0?n:"Yes"}}(this)}}),this.modalInstance.result.then(function(t){return function(r){return t.modalInstance.dismiss("cancel"),r&&"function"==typeof e?e():void 0}}(this))},r.prototype.closeModal=function(){var t;return null!=(t=this.modalInstance)&&"function"==typeof t.close?t.close():void 0},r}(AngularService)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.register("donationPromptService"),r.inject("$localStorage"),r.prototype.shouldShowPrompt=function(){var t,e;return null==this.$localStorage.hide_donation_prompt?!0:null==this.$localStorage.show_donation_prompt_date?(this._uncachePromptData(),!0):(e=new Date,t=new Date(this.$localStorage.show_donation_prompt_date),e>t?(this._uncachePromptData(),!0):!1)},r.prototype.hideDonationPrompt=function(){var t;return this._uncachePromptData(),t=new Date,t.setDate(t.getDate()+14),this._cachePromptData(t)},r.prototype._uncachePromptData=function(){return delete this.$localStorage.hide_donation_prompt,delete this.$localStorage.show_donation_prompt_date},r.prototype._cachePromptData=function(t){return this.$localStorage.hide_donation_prompt=!0,this.$localStorage.show_donation_prompt_date=t},r}(AngularService)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this.showAddManagersModal=e(this.showAddManagersModal,this),this.showPasswordModal=e(this.showPasswordModal,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("draftService"),o.inject("$modal","$sessionStorage"),o.prototype.showPasswordModal=function(t){var e;return e=null!=this.$sessionStorage.draft_password?this.$sessionStorage.draft_password:"",this.modalInstance=this.$modal.open({templateUrl:"app/templates/modals/draft_password_modal.html",controller:"DraftPasswordModalController",controllerAs:"modalCtrl",resolve:{draft_name:function(e){return function(){return t}}(this),draft_password:function(t){return function(){return e}}(this)}})},o.prototype.showAddManagersModal=function(t){return this.modalInstance=this.$modal.open({templateUrl:"app/templates/modals/add_managers.html",controller:"AddManagersController",controllerAs:"addManagersCtrl",resolve:{draft_id:function(e){return function(){return t}}(this)}})},o.prototype.closeModal=function(){var t;return null!=(t=this.modalInstance)&&"function"==typeof t.close?t.close():void 0},o}(AngularService)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.register("errorService"),r.inject("$sessionStorage"),r.prototype.joinErrorsForToastDisplay=function(t){return t.join("      ")},r}(AngularService)}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.register("messageService"),r.inject("toastr"),r.prototype.showSuccess=function(t,e){return null==e&&(e="Success!"),this.toastr.success(t,e)},r.prototype.showError=function(t,e){return null==e&&(e="Error"),this.toastr.error(t,e)},r.prototype.showInfo=function(t,e){return null==e&&(e="Information"),this.toastr.info(t,e)},r.prototype.showWarning=function(t,e){return null==e&&(e="Warning"),this.toastr.warning(t,e)},r.prototype.closeToasts=function(t){return"undefined"==typeof t?this.toastr.clear():this.toastr.clear(t)},r}(AngularService)}.call(this),function(){angular.module("app").factory("api",["$resource","ENV",function(t,e){return{Authentication:t(e.apiEndpoint+"authentication",{},{login:{method:"POST",url:e.apiEndpoint+"login"},register:{method:"POST",url:e.apiEndpoint+"register"},verify:{method:"POST",url:e.apiEndpoint+"verify"},verifyResetToken:{method:"GET",url:e.apiEndpoint+"verifyToken"},lostPassword:{method:"POST",url:e.apiEndpoint+"lostPassword"},resetPassword:{method:"POST",url:e.apiEndpoint+"resetPassword"},getProfile:{method:"GET",url:e.apiEndpoint+"commish/profile"},setProfile:{method:"PUT",url:e.apiEndpoint+"commish/profile"}}),Commish:t(e.apiEndpoint+"commissioners/:commish_id",{commish_id:"@commish_id"},{search:{method:"GET",url:e.apiEndpoint+"commissioners/search"}}),Admin:t(e.apiEndpoint+"admin",{draft_id:"@draft_id"},{getSports:{method:"GET",url:e.apiEndpoint+"admin/sports"},getAllDrafts:{method:"GET",url:e.apiEndpoint+"admin/drafts",isArray:!0},regenerateDraftStats:{method:"POST",url:e.apiEndpoint+"admin/draft/:draft_id/stats"}}),Draft:t(e.apiEndpoint+"draft/:id",{draft_id:"@draft_id"},{getDraftList:{method:"GET",url:e.apiEndpoint+"drafts",isArray:!0},searchCommissioners:{method:"GET",url:e.apiEndpoint+"drafts/commissioners/search"},getDraftsByCommish:{method:"GET",url:e.apiEndpoint+"drafts/:commish_id",isArray:!0},getStats:{method:"GET",url:e.apiEndpoint+"draft/:draft_id/stats"},getTimeRemaining:{method:"GET",url:e.apiEndpoint+"draft/:draft_id/timer/remaining"},getCreate:{method:"GET",url:e.apiEndpoint+"commish/draft/create"},save:{method:"POST",url:e.apiEndpoint+"commish/draft"},update:{method:"PUT",url:e.apiEndpoint+"commish/draft/:draft_id"},commishGet:{method:"GET",url:e.apiEndpoint+"commish/draft/:draft_id"},"delete":{method:"DELETE",url:e.apiEndpoint+"commish/draft/:draft_id"},updateStatus:{method:"PUT",url:e.apiEndpoint+"commish/draft/:draft_id/status"},getTimers:{method:"GET",url:e.apiEndpoint+"commish/draft/:draft_id/timers",isArray:!0},setTimers:{method:"POST",url:e.apiEndpoint+"commish/draft/:draft_id/timers"}}),Manager:t(e.apiEndpoint+"draft/:draft_id/manager/:manager_id",{draft_id:"@draft_id",manager_id:"@manager_id"},{getManagers:{method:"GET",url:e.apiEndpoint+"draft/:draft_id/managers",isArray:!0},commishGet:{method:"GET",url:e.apiEndpoint+"commish/draft/:draft_id/managers",isArray:!0},reorder:{method:"PUT",url:e.apiEndpoint+"commish/draft/:draft_id/managers/reorder"},addMultiple:{method:"POST",url:e.apiEndpoint+"commish/draft/:draft_id/managers"},"delete":{method:"DELETE",url:e.apiEndpoint+"commish/draft/:draft_id/manager/:manager_id"},update:{method:"PUT",url:e.apiEndpoint+"commish/draft/:draft_id/manager/:manager_id"}}),Pick:t(e.apiEndpoint+"draft/:draft_id/pick/:pick_id",{draft_id:"@draft_id",player_id:"@player_id"},{getAll:{method:"GET",url:e.apiEndpoint+"draft/:draft_id/picks"},getUpdated:{method:"GET",url:e.apiEndpoint+"draft/:draft_id/picks/updated"},getLast:{method:"GET",url:e.apiEndpoint+"draft/:draft_id/picks/last",isArray:!0},getNext:{method:"GET",url:e.apiEndpoint+"draft/:draft_id/picks/next",isArray:!0},getSelectedByRound:{method:"GET",url:e.apiEndpoint+"draft/:draft_id/round/:round/picks/selected",isArray:!0},getAllByRound:{method:"GET",url:e.apiEndpoint+"draft/:draft_id/round/:round/picks/all",isArray:!0},getAllByManager:{method:"GET",url:e.apiEndpoint+"draft/:draft_id/manager/:manager_id/picks/all",isArray:!0},search:{method:"GET",url:e.apiEndpoint+"draft/:draft_id/picks/search"},getCurrent:{method:"GET",url:e.apiEndpoint+"commish/draft/:draft_id/pick/current"},searchProPlayers:{method:"GET",url:e.apiEndpoint+"commish/proplayers/search"},alreadyDrafted:{method:"GET",url:e.apiEndpoint+"commish/draft/:draft_id/picks/alreadyDrafted"},add:{method:"POST",url:e.apiEndpoint+"commish/draft/:draft_id/pick/:player_id"},update:{method:"PUT",url:e.apiEndpoint+"commish/draft/:draft_id/pick/:player_id"}}),Trade:t(e.apiEndpoint+"draft/:draft_id/trades",{draft_id:"@draft_id",manager_id:"@manager_id"},{getAssets:{method:"GET",url:e.apiEndpoint+"commish/draft/:draft_id/manager/:manager_id/assets"},save:{method:"POST",url:e.apiEndpoint+"commish/draft/:draft_id/trade"}}),User:t(e.apiEndpoint+"admin/user/:id",{id:"@id"},{getAll:{method:"GET",url:e.apiEndpoint+"admin/users"},update:{method:"PUT",url:e.apiEndpoint+"admin/user/:id"},"delete":{method:"DELETE"}})}}])}.call(this),function(){var t,e=function(t,e){function o(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.register("pickService"),r.inject("$modal","$q","api"),r.prototype.checkForExistingPicks=function(t,e){var r,o,n;return n=this.$q.defer(),r=function(t){return function(r){var o,i,s;return r.possibleMatchExists===!1?n.resolve({pickIsNotDuplicate:!0}):(i=t.showDuplicatePickModal(e,r.matches),s=function(t){return n.resolve({pickIsNotDuplicate:t.pickIsNotDuplicate})},o=function(t){return n.reject({error:"Unable to confirm if duplicate player is intended"})},i.promise.then(s,o))}}(this),o=function(t){return function(e){return t.messageService.showError("Unable to search for player already drafted"),n.reject({data:e,status:e.status})}}(this),this.api.Pick.alreadyDrafted({draft_id:t,first_name:e.first_name,last_name:e.last_name},r,o),n},r.prototype.showDuplicatePickModal=function(t,e){var r;return r=this.$q.defer(),this.modalInstance=this.$modal.open({templateUrl:"app/templates/modals/duplicate_pick.html",controller:"DuplicatePickModalController",controllerAs:"modalCtrl",resolve:{duplicateMatches:function(t){return function(){return e}}(this),currentPick:function(e){return function(){return t}}(this)}}),this.modalInstance.result.then(function(t){return function(e){return t.modalInstance.dismiss("cancel"),r.resolve({pickIsNotDuplicate:e})}}(this)),r},r.prototype.closeModal=function(){var t;return null!=(t=this.modalInstance)&&"function"==typeof t.close?t.close():void 0},r}(AngularService)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(t){function o(){return this.openModal=e(this.openModal,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.register("workingModalService"),o.inject("$modal","$interval"),o.prototype.openModal=function(t,e){return null==t&&(t=0),null==e&&(e=250),this.closeModal(),this.modalInstance=this.$modal.open({templateUrl:"app/templates/modals/working_modal.html",controller:"WorkingModalController",controllerAs:"modalCtrl",size:"sm",keyboard:!1,backdrop:"static",resolve:{typicalLoadingTimeMs:function(e){return function(){return t}}(this),loadingBarIncrement:function(t){return function(){return e}}(this),loadingBarMax:function(e){return function(){return t>0?0:100}}(this)}})},o.prototype.closeModal=function(){var t;return null!=(t=this.modalInstance)&&"function"==typeof t.close?t.close():void 0},o}(AngularService)}.call(this);